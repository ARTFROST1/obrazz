<% content_for(:title) { 'Уведомления - Obrazz' } %>

<!-- Page Header -->
<div class="mb-8">
  <h1 class="text-2xl font-bold leading-7 text-gray-900 sm:truncate sm:text-3xl sm:tracking-tight">
    Настройки уведомлений
  </h1>
  <p class="mt-1 text-sm text-gray-500">
    Управляйте тем, какие уведомления вы получаете
  </p>
</div>

<div class="lg:grid lg:grid-cols-3 lg:gap-8">
  <!-- Sidebar Navigation -->
  <div class="lg:col-span-1">
    <nav class="space-y-1">
      <%= link_to dashboard_settings_path, 
          class: "group flex items-center px-3 py-2 text-sm font-medium rounded-md text-gray-600 hover:bg-gray-50 hover:text-gray-900" do %>
        <svg class="mr-3 h-5 w-5 flex-shrink-0 text-gray-400 group-hover:text-gray-500" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 20.118a7.5 7.5 0 0114.998 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632z" />
        </svg>
        Профиль
      <% end %>
      
      <%= link_to notifications_dashboard_settings_path, 
          class: "group flex items-center px-3 py-2 text-sm font-medium rounded-md bg-purple-50 text-purple-700" do %>
        <svg class="mr-3 h-5 w-5 flex-shrink-0 text-purple-500" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" d="M14.857 17.082a23.848 23.848 0 005.454-1.31A8.967 8.967 0 0118 9.75v-.7V9A6 6 0 006 9v.75a8.967 8.967 0 01-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 01-5.714 0m5.714 0a3 3 0 11-5.714 0" />
        </svg>
        Уведомления
      <% end %>
    </nav>
  </div>
  
  <!-- Main Content -->
  <div class="mt-8 lg:mt-0 lg:col-span-2">
    <div class="bg-white shadow rounded-xl overflow-hidden">
      <%= form_with url: update_notifications_dashboard_settings_path, method: :patch, class: "divide-y divide-gray-200" do |f| %>
        
        <!-- Email Notifications -->
        <div class="p-6 sm:p-8">
          <h2 class="text-lg font-medium text-gray-900 mb-1">Email-уведомления</h2>
          <p class="text-sm text-gray-500 mb-6">Выберите, какие письма вы хотите получать</p>
          
          <div class="space-y-4">
            <div class="flex items-start">
              <div class="flex h-6 items-center">
                <input type="checkbox" 
                       name="notifications[email_generations]" 
                       id="email_generations"
                       value="true"
                       <%= 'checked' if @notification_settings['email_generations'] %>
                       class="h-4 w-4 rounded border-gray-300 text-purple-600 focus:ring-purple-600">
              </div>
              <div class="ml-3">
                <label for="email_generations" class="text-sm font-medium text-gray-900">Готовность генераций</label>
                <p class="text-sm text-gray-500">Получать уведомления когда AI-генерация завершена</p>
              </div>
            </div>
            
            <div class="flex items-start">
              <div class="flex h-6 items-center">
                <input type="checkbox" 
                       name="notifications[email_subscription]" 
                       id="email_subscription"
                       value="true"
                       <%= 'checked' if @notification_settings['email_subscription'] %>
                       class="h-4 w-4 rounded border-gray-300 text-purple-600 focus:ring-purple-600">
              </div>
              <div class="ml-3">
                <label for="email_subscription" class="text-sm font-medium text-gray-900">Подписка и платежи</label>
                <p class="text-sm text-gray-500">Уведомления об оплате, продлении и истечении подписки</p>
              </div>
            </div>
            
            <div class="flex items-start">
              <div class="flex h-6 items-center">
                <input type="checkbox" 
                       name="notifications[email_marketing]" 
                       id="email_marketing"
                       value="true"
                       <%= 'checked' if @notification_settings['email_marketing'] %>
                       class="h-4 w-4 rounded border-gray-300 text-purple-600 focus:ring-purple-600">
              </div>
              <div class="ml-3">
                <label for="email_marketing" class="text-sm font-medium text-gray-900">Новости и акции</label>
                <p class="text-sm text-gray-500">Информация о новых функциях, специальных предложениях</p>
              </div>
            </div>
          </div>
        </div>
        
        <!-- Push Notifications -->
        <div class="p-6 sm:p-8">
          <h2 class="text-lg font-medium text-gray-900 mb-1">Push-уведомления</h2>
          <p class="text-sm text-gray-500 mb-6">Уведомления в мобильном приложении</p>
          
          <div class="space-y-4">
            <div class="flex items-start">
              <div class="flex h-6 items-center">
                <input type="checkbox" 
                       name="notifications[push_generations]" 
                       id="push_generations"
                       value="true"
                       <%= 'checked' if @notification_settings['push_generations'] %>
                       class="h-4 w-4 rounded border-gray-300 text-purple-600 focus:ring-purple-600">
              </div>
              <div class="ml-3">
                <label for="push_generations" class="text-sm font-medium text-gray-900">Готовность генераций</label>
                <p class="text-sm text-gray-500">Push-уведомление когда AI-генерация завершена</p>
              </div>
            </div>
            
            <div class="flex items-start">
              <div class="flex h-6 items-center">
                <input type="checkbox" 
                       name="notifications[push_promotions]" 
                       id="push_promotions"
                       value="true"
                       <%= 'checked' if @notification_settings['push_promotions'] %>
                       class="h-4 w-4 rounded border-gray-300 text-purple-600 focus:ring-purple-600">
              </div>
              <div class="ml-3">
                <label for="push_promotions" class="text-sm font-medium text-gray-900">Акции и промо</label>
                <p class="text-sm text-gray-500">Специальные предложения и скидки</p>
              </div>
            </div>
          </div>
        </div>
        
        <!-- Save Button -->
        <div class="px-6 py-4 bg-gray-50 flex justify-end">
          <%= f.submit 'Сохранить настройки', 
              class: "inline-flex justify-center rounded-md border border-transparent bg-purple-600 py-2 px-4 text-sm font-medium text-white shadow-sm hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2" %>
        </div>
      <% end %>
    </div>
  </div>
</div>
