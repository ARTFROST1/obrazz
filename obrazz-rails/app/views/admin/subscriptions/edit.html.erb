<% content_for :title, "Edit Subscription" %>

<% content_for :header do %>
  <div class="flex items-center">
    <a href="<%= admin_subscription_path(@subscription) %>" class="mr-4 text-gray-400 hover:text-gray-600">
      <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" d="M10.5 19.5L3 12m0 0l7.5-7.5M3 12h18" />
      </svg>
    </a>
    <div>
      <h1 class="text-3xl font-bold tracking-tight text-gray-900">Edit Subscription</h1>
      <p class="text-sm text-gray-500"><%= @subscription.user.email %></p>
    </div>
  </div>
<% end %>

<div class="px-4 sm:px-0">
  <div class="bg-white shadow sm:rounded-lg">
    <div class="px-4 py-5 sm:p-6">
      <%= form_with model: [:admin, @subscription], class: "space-y-6" do |f| %>
        <% if @subscription.errors.any? %>
          <div class="rounded-md bg-red-50 p-4">
            <div class="flex">
              <div class="ml-3">
                <h3 class="text-sm font-medium text-red-800">There were errors with your submission</h3>
                <div class="mt-2 text-sm text-red-700">
                  <ul class="list-disc pl-5 space-y-1">
                    <% @subscription.errors.full_messages.each do |message| %>
                      <li><%= message %></li>
                    <% end %>
                  </ul>
                </div>
              </div>
            </div>
          </div>
        <% end %>

        <div>
          <label for="subscription_plan" class="block text-sm font-medium text-gray-700">Plan</label>
          <div class="mt-1">
            <%= f.select :plan, [['Free', 'free'], ['Pro Monthly', 'pro_monthly'], ['Pro Yearly', 'pro_yearly']], {}, class: "block w-full rounded-md border-gray-300 shadow-sm focus:border-brand-500 focus:ring-brand-500 sm:text-sm" %>
          </div>
        </div>

        <div>
          <label for="subscription_status" class="block text-sm font-medium text-gray-700">Status</label>
          <div class="mt-1">
            <%= f.select :status, [['Active', 'active'], ['Cancelled', 'cancelled'], ['Expired', 'expired'], ['Past Due', 'past_due']], {}, class: "block w-full rounded-md border-gray-300 shadow-sm focus:border-brand-500 focus:ring-brand-500 sm:text-sm" %>
          </div>
        </div>

        <div>
          <label for="subscription_current_period_end" class="block text-sm font-medium text-gray-700">Current Period End</label>
          <div class="mt-1">
            <%= f.datetime_local_field :current_period_end, class: "block w-full rounded-md border-gray-300 shadow-sm focus:border-brand-500 focus:ring-brand-500 sm:text-sm" %>
          </div>
        </div>

        <div class="flex justify-end space-x-3">
          <a href="<%= admin_subscription_path(@subscription) %>" class="inline-flex justify-center py-2 px-4 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-brand-500">
            Cancel
          </a>
          <%= f.submit "Save Changes", class: "inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-brand-600 hover:bg-brand-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-brand-500 cursor-pointer" %>
        </div>
      <% end %>
    </div>
  </div>
</div>
