# üì¶ Curated Collections (–ü–æ–¥–±–æ—Ä–∫–∏) ‚Äî –ü–æ–ª–Ω—ã–π –ø–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

> **–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 22 –¥–µ–∫–∞–±—Ä—è 2025  
> **–°—Ç–∞—Ç—É—Å:** –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ  
> **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** High  
> **–ê–≤—Ç–æ—Ä:** AI Assistant  
> **Estimated Timeline:** 2-3 –Ω–µ–¥–µ–ª–∏

---

## üìã –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ

1. [–û–±–∑–æ—Ä —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞](#1-–æ–±–∑–æ—Ä-—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞)
2. [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã](#2-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞-—Å–∏—Å—Ç–µ–º—ã)
3. [–ú–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö](#3-–º–æ–¥–µ–ª—å-–¥–∞–Ω–Ω—ã—Ö)
4. [Backend (Supabase)](#4-backend-supabase)
5. [–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å](#5-–∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å)
6. [Frontend (React Native)](#6-frontend-react-native)
7. [–ü–æ—à–∞–≥–æ–≤—ã–π –ø–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏](#7-–ø–æ—à–∞–≥–æ–≤—ã–π-–ø–ª–∞–Ω-—Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏)
8. [API Reference](#8-api-reference)
9. [UI/UX —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏](#9-uiux-—Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏)

---

## 1. –û–±–∑–æ—Ä —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞

### 1.1 –ß—Ç–æ —Ç–∞–∫–æ–µ –ø–æ–¥–±–æ—Ä–∫–∏?

**–ü–æ–¥–±–æ—Ä–∫–∏ (Curated Collections)** ‚Äî —ç—Ç–æ –∫—É—Ä–∏—Ä—É–µ–º—ã–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º —Å–ø–∏—Å–∫–∏ —Ç–æ–≤–∞—Ä–æ–≤ –∏–∑ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω–æ–≤, —Å–≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ —Ç–µ–º–∞—Ç–∏–∫–∞–º (—Å—Ç–∏–ª–∏, —Å–æ–±—ã—Ç–∏—è, —Å–µ–∑–æ–Ω—ã, –±—Ä–µ–Ω–¥—ã –∏ —Ç.–¥.).

### 1.2 –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

| –§—É–Ω–∫—Ü–∏—è                       | –û–ø–∏—Å–∞–Ω–∏–µ                                                      |
| ----------------------------- | ------------------------------------------------------------- |
| **–ö–∞—Ä—É—Å–µ–ª—å –ø–æ–¥–±–æ—Ä–æ–∫**         | –ü–ª–∏—Ç–∫–∏ –Ω–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ –≤–º–µ—Å—Ç–æ –∫–∞—Ä—É—Å–µ–ª–∏ —Å—Ç–∏–ª–µ–π             |
| **Masonry-—Å–ø–∏—Å–æ–∫**            | –°—Ç—Ä–∞–Ω–∏—Ü–∞ –ø–æ–¥–±–æ—Ä–∫–∏ —Å —Ç–æ–≤–∞—Ä–∞–º–∏ –≤ 2-–∫–æ–ª–æ–Ω–æ—á–Ω–æ–π —Å–µ—Ç–∫–µ             |
| **–î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Ç–æ–≤–∞—Ä–∞** | –ü—Ä–æ—Å–º–æ—Ç—Ä —Ç–æ–≤–∞—Ä–∞ + –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –≥–∞—Ä–¥–µ—Ä–æ–± + –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ –∏—Å—Ç–æ—á–Ω–∏–∫ |
| **–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å**              | GUI –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ–¥–±–æ—Ä–æ–∫ (TG-–±–æ—Ç –∏–ª–∏ Web)     |
| **–ì–ª–æ–±–∞–ª—å–Ω–æ—Å—Ç—å**              | –í—Å–µ –ø–æ–¥–±–æ—Ä–∫–∏ –≤–∏–¥–Ω—ã –≤—Å–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è              |

### 1.3 User Flow

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                        –ì–õ–ê–í–ù–ê–Ø –°–¢–†–ê–ù–ò–¶–ê                          ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê             ‚îÇ
‚îÇ  ‚îÇ  Y2K    ‚îÇ  ‚îÇOld Money‚îÇ  ‚îÇ  Sport  ‚îÇ  ‚îÇ Casual  ‚îÇ  ‚Üê –ö–∞—Ä—É—Å–µ–ª—å ‚îÇ
‚îÇ  ‚îÇ  Guy    ‚îÇ  ‚îÇ  Style  ‚îÇ  ‚îÇ  Look   ‚îÇ  ‚îÇ Friday  ‚îÇ    –ø–æ–¥–±–æ—Ä–æ–∫ ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò             ‚îÇ
‚îÇ       ‚îÇ                                                          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
        ‚îÇ Tap
        ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    –°–¢–†–ê–ù–ò–¶–ê –ü–û–î–ë–û–†–ö–ò                             ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê‚îÇ
‚îÇ  ‚îÇ ‚Üê Gift Ideas                            üîó ‚ÜïÔ∏è               ‚îÇ‚îÇ
‚îÇ  ‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê‚îÇ‚îÇ
‚îÇ  ‚îÇ ‚îÇ  Y2K Guy    ‚îÇ  ‚îÇ      BANNER IMAGE                       ‚îÇ‚îÇ‚îÇ
‚îÇ  ‚îî‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îò‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                       ‚îÇ
‚îÇ  ‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ  ‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ                       ‚îÇ
‚îÇ  ‚îÇ ‚îÇ             ‚îÇ ‚îÇ  ‚îÇ ‚îÇ             ‚îÇ ‚îÇ   ‚Üê Masonry Grid      ‚îÇ
‚îÇ  ‚îÇ ‚îÇ   Jacket    ‚îÇ ‚îÇ  ‚îÇ ‚îÇ   Jeans     ‚îÇ ‚îÇ     2 columns         ‚îÇ
‚îÇ  ‚îÇ ‚îÇ   $21.49    ‚îÇ ‚îÇ  ‚îÇ ‚îÇ   $39.99    ‚îÇ ‚îÇ                       ‚îÇ
‚îÇ  ‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ  ‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ                       ‚îÇ
‚îÇ  ‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ  ‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ                       ‚îÇ
‚îÇ  ‚îÇ ‚îÇ             ‚îÇ ‚îÇ  ‚îÇ ‚îÇ             ‚îÇ ‚îÇ                       ‚îÇ
‚îÇ  ‚îÇ ‚îÇ  Pokemon    ‚îÇ ‚îÇ  ‚îÇ ‚îÇ   Jersey    ‚îÇ ‚îÇ                       ‚îÇ
‚îÇ  ‚îÇ ‚îÇ   $59.99    ‚îÇ ‚îÇ  ‚îÇ ‚îÇ   $23.99    ‚îÇ ‚îÇ                       ‚îÇ
‚îÇ  ‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ  ‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ                       ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                       ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
        ‚îÇ Tap –Ω–∞ —Ç–æ–≤–∞—Ä
        ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                –î–ï–¢–ê–õ–¨–ù–ê–Ø –°–¢–†–ê–ù–ò–¶–ê –¢–û–í–ê–†–ê                         ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê‚îÇ
‚îÇ  ‚îÇ                                                             ‚îÇ‚îÇ
‚îÇ  ‚îÇ              [–ò–ó–û–ë–†–ê–ñ–ï–ù–ò–ï –¢–û–í–ê–†–ê]                           ‚îÇ‚îÇ
‚îÇ  ‚îÇ                                                             ‚îÇ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò‚îÇ
‚îÇ                                                                  ‚îÇ
‚îÇ  IYTR Men's Colorblock Windbreaker                              ‚îÇ
‚îÇ  üí∞ $21.49                                                      ‚îÇ
‚îÇ  üè™ Amazon                                                      ‚îÇ
‚îÇ  üì¶ Category: Outerwear                                         ‚îÇ
‚îÇ                                                                  ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê               ‚îÇ
‚îÇ  ‚îÇ ‚ûï Add to Wardrobe  ‚îÇ  ‚îÇ  üîó Open in Store   ‚îÇ               ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò               ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## 2. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã

### 2.1 –û–±—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                         ADMIN LAYER                                  ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê‚îÇ
‚îÇ  ‚îÇ   Telegram Bot    ‚îÇ OR  ‚îÇ       Web Admin Panel                 ‚îÇ‚îÇ
‚îÇ  ‚îÇ   (Node.js)       ‚îÇ     ‚îÇ       (Next.js / React)               ‚îÇ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
             ‚îÇ                                 ‚îÇ
             ‚ñº                                 ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                       SUPABASE BACKEND                               ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ  ‚îÇ   collections   ‚îÇ  ‚îÇcollection_items ‚îÇ  ‚îÇ   Supabase Storage  ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ     table       ‚îÇ  ‚îÇ     table       ‚îÇ  ‚îÇ   (images bucket)   ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  - id           ‚îÇ  ‚îÇ  - collection_id‚îÇ  ‚îÇ   /collections/     ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  - title        ‚îÇ  ‚îÇ  - source_url   ‚îÇ  ‚îÇ   /collection-items/‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  - banner_url   ‚îÇ  ‚îÇ  - image_url    ‚îÇ  ‚îÇ                     ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  - gradient     ‚îÇ  ‚îÇ  - price        ‚îÇ  ‚îÇ                     ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  - is_active    ‚îÇ  ‚îÇ  - metadata     ‚îÇ  ‚îÇ                     ‚îÇ  ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îÇ                                                                      ‚îÇ
‚îÇ  RLS Policies: All collections/items viewable by all authenticated  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
             ‚îÇ
             ‚îÇ Public API (anon key)
             ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                      MOBILE APP (React Native)                       ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ  ‚îÇCollectionsCarou-‚îÇ  ‚îÇ CollectionScreen‚îÇ  ‚îÇCollectionItemDetail ‚îÇ  ‚îÇ
‚îÇ  ‚îÇsel (Home)       ‚îÇ  ‚îÇ (Masonry List)  ‚îÇ  ‚îÇ   (Item View)       ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ                 ‚îÇ  ‚îÇ                 ‚îÇ  ‚îÇ                     ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ - Fetch active  ‚îÇ  ‚îÇ - Fetch items   ‚îÇ  ‚îÇ - View details      ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ   collections   ‚îÇ  ‚îÇ   by collection ‚îÇ  ‚îÇ - Add to wardrobe   ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ - Display tiles ‚îÇ  ‚îÇ - Masonry grid  ‚îÇ  ‚îÇ - Open source URL   ‚îÇ  ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îÇ                                                                      ‚îÇ
‚îÇ  Services: collectionService.ts                                      ‚îÇ
‚îÇ  Store: collectionStore.ts (optional caching)                        ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### 2.2 –í—ã–±–æ—Ä –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏: TG-–±–æ—Ç vs Web

| –ö—Ä–∏—Ç–µ—Ä–∏–π                 | Telegram Bot               | Web Admin Panel       |
| ------------------------ | -------------------------- | --------------------- |
| **–°–∫–æ—Ä–æ—Å—Ç—å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏**  | ‚ö° –ë—ã—Å—Ç—Ä–µ–µ (3-5 –¥–Ω–µ–π)      | üê¢ –î–æ–ª—å—à–µ (7-10 –¥–Ω–µ–π) |
| **UX –¥–ª—è –∞–¥–º–∏–Ω–∞**        | üì± –ú–æ–±–∏–ª—å–Ω—ã–π, –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π | üíª –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π GUI    |
| **–ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π** | ‚úÖ –ü—Ä—è–º–æ –≤ —á–∞—Ç             | ‚úÖ Drag & Drop        |
| **Bulk –æ–ø–µ—Ä–∞—Ü–∏–∏**        | ‚ùå –°–ª–æ–∂–Ω–æ                  | ‚úÖ –£–¥–æ–±–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã    |
| **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**         | ‚úÖ TG Auth + Admin IDs     | ‚úÖ Supabase Auth      |
| **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å**     | üî∏ –°—Ä–µ–¥–Ω—è—è                 | ‚úÖ –í—ã—Å–æ–∫–∞—è            |

### **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**

–ù–∞—á–∞—Ç—å —Å **Telegram Bot** –¥–ª—è MVP (–±—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç), –∑–∞—Ç–µ–º –¥–æ–±–∞–≤–∏—Ç—å **Web Admin** –¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è.

---

## 3. –ú–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö

### 3.1 TypeScript Types

```typescript
// types/models/collection.ts

export interface Collection {
  id: string;
  title: string;
  titleEn?: string; // English title for i18n
  description?: string;
  bannerUrl?: string; // Banner image URL from Supabase Storage
  gradient: [string, string]; // Gradient colors for tile
  sortOrder: number; // Order in carousel
  isActive: boolean; // Published or draft
  itemsCount: number; // Cached count of items
  createdAt: Date;
  updatedAt: Date;
}

export interface CollectionItem {
  id: string;
  collectionId: string;
  title: string;
  description?: string;
  imageUrl: string; // Full-size image URL from Supabase Storage
  thumbnailUrl?: string; // Optional thumbnail URL for faster Masonry
  imageWidth?: number; // Needed for correct Masonry layout
  imageHeight?: number; // Needed for correct Masonry layout
  sourceUrl: string; // Link to original store
  sourceName: string; // Store name (Amazon, Zara, etc.)
  price?: number;
  currency?: string; // USD, RUB, EUR
  category?: ItemCategory; // Optional: for filtering
  colors?: Color[]; // Optional: extracted colors
  sortOrder: number; // Order in collection
  isActive: boolean;
  metadata?: CollectionItemMetadata;
  createdAt: Date;
  updatedAt: Date;
}

export interface CollectionItemMetadata {
  brand?: string;
  size?: string[];
  material?: string;
  originalPrice?: number; // Before discount
  discount?: number; // Percentage
  inStock?: boolean;
  aiTags?: string[]; // AI-generated tags
}

// For carousel display
export interface CollectionTile {
  id: string;
  title: string;
  gradient: [string, string];
  bannerUrl?: string;
  itemsCount: number;
}
```

### 3.2 Database Schema (Supabase PostgreSQL)

```sql
-- =====================================================
-- COLLECTIONS TABLE
-- Stores curated collection metadata
-- =====================================================

CREATE TABLE public.collections (
  id UUID DEFAULT uuid_generate_v4() PRIMARY KEY,
  title TEXT NOT NULL,
  title_en TEXT,                              -- English title
  description TEXT,
  banner_url TEXT,                            -- Storage URL
  gradient JSONB DEFAULT '["#667eea", "#764ba2"]', -- [color1, color2]
  sort_order INTEGER DEFAULT 0,
  is_active BOOLEAN DEFAULT false,           -- Draft by default
  items_count INTEGER DEFAULT 0,             -- Cached count
  metadata JSONB DEFAULT '{}',               -- Future extensibility
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW(),
  created_by UUID REFERENCES auth.users(id)  -- Admin who created
);

-- =====================================================
-- COLLECTION_ITEMS TABLE
-- Stores items within collections
-- =====================================================

CREATE TABLE public.collection_items (
  id UUID DEFAULT uuid_generate_v4() PRIMARY KEY,
  collection_id UUID REFERENCES public.collections(id) ON DELETE CASCADE NOT NULL,
  title TEXT NOT NULL,
  description TEXT,
  image_url TEXT NOT NULL,                   -- Full image Storage URL
  thumbnail_url TEXT,                        -- Optional thumb Storage URL
  image_width INTEGER,                       -- For Masonry layout
  image_height INTEGER,                      -- For Masonry layout
  source_url TEXT NOT NULL,                  -- External store link
  source_name TEXT NOT NULL,                 -- Store name
  price DECIMAL(10, 2),
  currency TEXT DEFAULT 'USD',
  category TEXT,                             -- Item category
  colors JSONB DEFAULT '[]',                 -- Array of color objects
  sort_order INTEGER DEFAULT 0,
  is_active BOOLEAN DEFAULT true,
  metadata JSONB DEFAULT '{}',               -- Brand, size, etc.
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW()
);

-- =====================================================
-- INDEXES
-- =====================================================

CREATE INDEX idx_collections_active ON public.collections(is_active, sort_order);
CREATE INDEX idx_collections_created ON public.collections(created_at DESC);

CREATE INDEX idx_collection_items_collection ON public.collection_items(collection_id);
CREATE INDEX idx_collection_items_active ON public.collection_items(collection_id, is_active, sort_order);
CREATE INDEX idx_collection_items_category ON public.collection_items(category);

-- =====================================================
-- ROW LEVEL SECURITY (RLS)
-- =====================================================

ALTER TABLE public.collections ENABLE ROW LEVEL SECURITY;
ALTER TABLE public.collection_items ENABLE ROW LEVEL SECURITY;

-- Collections: Everyone can view active collections
CREATE POLICY "Active collections are viewable by everyone"
  ON public.collections FOR SELECT
  USING (auth.role() = 'authenticated' AND is_active = true);

-- NOTE: –î–ª—è INSERT –≤ RLS –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è WITH CHECK, –∞ –Ω–µ USING.
-- Collections: Only admins can insert/update/delete

CREATE POLICY "Admins can insert collections"
  ON public.collections FOR INSERT
  WITH CHECK (
    EXISTS (
      SELECT 1 FROM public.admin_users
      WHERE user_id = auth.uid()
    )
  );

CREATE POLICY "Admins can update collections"
  ON public.collections FOR UPDATE
  USING (
    EXISTS (
      SELECT 1 FROM public.admin_users
      WHERE user_id = auth.uid()
    )
  )
  WITH CHECK (
    EXISTS (
      SELECT 1 FROM public.admin_users
      WHERE user_id = auth.uid()
    )
  );

CREATE POLICY "Admins can delete collections"
  ON public.collections FOR DELETE
  USING (
    EXISTS (
      SELECT 1 FROM public.admin_users
      WHERE user_id = auth.uid()
    )
  );

-- Collection Items: Everyone can view items in active collections
CREATE POLICY "Collection items are viewable by everyone"
  ON public.collection_items FOR SELECT
  USING (
    auth.role() = 'authenticated' AND
    is_active = true AND
    EXISTS (
      SELECT 1 FROM public.collections
      WHERE collections.id = collection_items.collection_id
      AND collections.is_active = true
    )
  );

-- Collection Items: Only admins can insert/update/delete

CREATE POLICY "Admins can insert collection items"
  ON public.collection_items FOR INSERT
  WITH CHECK (
    EXISTS (
      SELECT 1 FROM public.admin_users
      WHERE user_id = auth.uid()
    )
  );

CREATE POLICY "Admins can update collection items"
  ON public.collection_items FOR UPDATE
  USING (
    EXISTS (
      SELECT 1 FROM public.admin_users
      WHERE user_id = auth.uid()
    )
  )
  WITH CHECK (
    EXISTS (
      SELECT 1 FROM public.admin_users
      WHERE user_id = auth.uid()
    )
  );

CREATE POLICY "Admins can delete collection items"
  ON public.collection_items FOR DELETE
  USING (
    EXISTS (
      SELECT 1 FROM public.admin_users
      WHERE user_id = auth.uid()
    )
  );

-- =====================================================
-- ADMIN USERS TABLE (for RLS)
-- =====================================================

CREATE TABLE public.admin_users (
  id UUID DEFAULT uuid_generate_v4() PRIMARY KEY,
  user_id UUID REFERENCES auth.users(id) UNIQUE NOT NULL,
  telegram_id BIGINT UNIQUE,                 -- For TG bot auth
  role TEXT DEFAULT 'admin',
  created_at TIMESTAMPTZ DEFAULT NOW()
);

-- RLS for admin_users: allow user to read ONLY their own row.
-- Manage this table via service-role (TG bot / server) to avoid privilege escalation.
ALTER TABLE public.admin_users ENABLE ROW LEVEL SECURITY;
CREATE POLICY "Users can read own admin row"
  ON public.admin_users FOR SELECT
  USING (user_id = auth.uid());

-- =====================================================
-- TRIGGER: Update items_count on collection_items changes
-- =====================================================

-- Best practice: items_count –¥–æ–ª–∂–µ–Ω —É—á–∏—Ç—ã–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ is_active=true
-- –∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç UPDATE (—Å–º–µ–Ω–∞ collection_id / –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ is_active).

CREATE OR REPLACE FUNCTION recalc_collection_items_count(p_collection_id UUID)
RETURNS VOID AS $$
BEGIN
  UPDATE collections
  SET items_count = (
    SELECT COUNT(*)::int
    FROM collection_items
    WHERE collection_id = p_collection_id AND is_active = true
  ),
  updated_at = NOW()
  WHERE id = p_collection_id;
END;
$$ LANGUAGE plpgsql;

CREATE OR REPLACE FUNCTION on_collection_items_changed()
RETURNS TRIGGER AS $$
BEGIN
  IF TG_OP = 'INSERT' THEN
    PERFORM recalc_collection_items_count(NEW.collection_id);
  ELSIF TG_OP = 'DELETE' THEN
    PERFORM recalc_collection_items_count(OLD.collection_id);
  ELSIF TG_OP = 'UPDATE' THEN
    IF NEW.collection_id IS DISTINCT FROM OLD.collection_id THEN
      PERFORM recalc_collection_items_count(OLD.collection_id);
      PERFORM recalc_collection_items_count(NEW.collection_id);
    ELSIF NEW.is_active IS DISTINCT FROM OLD.is_active THEN
      PERFORM recalc_collection_items_count(NEW.collection_id);
    END IF;
  END IF;

  RETURN NULL;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER trigger_collection_items_changed
AFTER INSERT OR UPDATE OR DELETE ON collection_items
FOR EACH ROW EXECUTE FUNCTION on_collection_items_changed();

-- =====================================================
-- TRIGGER: Update updated_at timestamp
-- =====================================================

CREATE OR REPLACE FUNCTION update_updated_at()
RETURNS TRIGGER AS $$
BEGIN
  NEW.updated_at = NOW();
  RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER trigger_collections_updated
BEFORE UPDATE ON collections
FOR EACH ROW EXECUTE FUNCTION update_updated_at();

CREATE TRIGGER trigger_collection_items_updated
BEFORE UPDATE ON collection_items
FOR EACH ROW EXECUTE FUNCTION update_updated_at();
```

### 3.3 Supabase Storage Structure

```
storage/
‚îî‚îÄ‚îÄ collections/                    # Bucket for collection assets
    ‚îú‚îÄ‚îÄ banners/                    # Collection banner images
    ‚îÇ   ‚îú‚îÄ‚îÄ y2k-guy-banner.jpg
    ‚îÇ   ‚îú‚îÄ‚îÄ old-money-banner.jpg
    ‚îÇ   ‚îî‚îÄ‚îÄ ...
  ‚îî‚îÄ‚îÄ items/                      # Collection item images
    ‚îú‚îÄ‚îÄ {collection_id}/
    ‚îÇ   ‚îú‚îÄ‚îÄ full/
    ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ item-001.jpg
    ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ...
    ‚îÇ   ‚îî‚îÄ‚îÄ thumb/
    ‚îÇ       ‚îú‚îÄ‚îÄ item-001.jpg
    ‚îÇ       ‚îî‚îÄ‚îÄ ...
    ‚îî‚îÄ‚îÄ ...
```

**Storage Policies:**

```sql
-- Read access for authenticated users (–ø–æ–¥–±–æ—Ä–∫–∏ –¥–æ—Å—Ç—É–ø–Ω—ã –≤—Å–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è)
CREATE POLICY "Public read access for collection images"
ON storage.objects FOR SELECT
USING (bucket_id = 'collections' AND auth.role() = 'authenticated');

-- Admin write access
CREATE POLICY "Admin write access for collection images"
ON storage.objects FOR INSERT
WITH CHECK (
  bucket_id = 'collections' AND
  EXISTS (
    SELECT 1 FROM public.admin_users
    WHERE user_id = auth.uid()
  )
);

-- Admin update/delete access (optional, but –æ–±—ã—á–Ω–æ –Ω—É–∂–Ω–æ –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è/–∑–∞–º–µ–Ω—ã –∫–∞—Ä—Ç–∏–Ω–æ–∫)
CREATE POLICY "Admin update access for collection images"
ON storage.objects FOR UPDATE
USING (
  bucket_id = 'collections' AND
  EXISTS (SELECT 1 FROM public.admin_users WHERE user_id = auth.uid())
)
WITH CHECK (
  bucket_id = 'collections' AND
  EXISTS (SELECT 1 FROM public.admin_users WHERE user_id = auth.uid())
);

CREATE POLICY "Admin delete access for collection images"
ON storage.objects FOR DELETE
USING (
  bucket_id = 'collections' AND
  EXISTS (SELECT 1 FROM public.admin_users WHERE user_id = auth.uid())
);
```

---

## 4. Backend (Supabase)

### 4.1 Edge Functions (–¥–ª—è TG Bot)

```typescript
// supabase/functions/telegram-webhook/index.ts

import { serve } from 'https://deno.land/std@0.168.0/http/server.ts';
import { createClient } from 'https://esm.sh/@supabase/supabase-js@2';

const TELEGRAM_BOT_TOKEN = Deno.env.get('TELEGRAM_BOT_TOKEN')!;
const ADMIN_TELEGRAM_IDS = Deno.env.get('ADMIN_TELEGRAM_IDS')!.split(',').map(Number);

serve(async (req) => {
  const { message } = await req.json();

  // Check if user is admin
  if (!ADMIN_TELEGRAM_IDS.includes(message.from.id)) {
    return new Response('Unauthorized', { status: 403 });
  }

  const supabase = createClient(
    Deno.env.get('SUPABASE_URL')!,
    Deno.env.get('SUPABASE_SERVICE_ROLE_KEY')!,
  );

  // Command handling
  const text = message.text || '';

  if (text.startsWith('/newcollection')) {
    // Create new collection flow
    // ...
  }

  if (text.startsWith('/additem')) {
    // Add item to collection flow
    // ...
  }

  // Handle photo uploads
  if (message.photo) {
    // Upload to Supabase Storage
    // ...
  }

  return new Response('OK');
});
```

### 4.2 Database Functions

```sql
-- Function to get collections with items count
CREATE OR REPLACE FUNCTION get_active_collections()
RETURNS TABLE (
  id UUID,
  title TEXT,
  title_en TEXT,
  banner_url TEXT,
  gradient JSONB,
  items_count INTEGER,
  sort_order INTEGER
) AS $$
BEGIN
  RETURN QUERY
  SELECT
    c.id,
    c.title,
    c.title_en,
    c.banner_url,
    c.gradient,
    c.items_count,
    c.sort_order
  FROM collections c
  WHERE c.is_active = true
  ORDER BY c.sort_order ASC, c.created_at DESC;
END;
$$ LANGUAGE plpgsql SECURITY DEFINER;

-- Function to get collection items with pagination
CREATE OR REPLACE FUNCTION get_collection_items(
  p_collection_id UUID,
  p_limit INTEGER DEFAULT 20,
  p_offset INTEGER DEFAULT 0
)
RETURNS TABLE (
  id UUID,
  title TEXT,
  description TEXT,
  image_url TEXT,
  thumbnail_url TEXT,
  image_width INTEGER,
  image_height INTEGER,
  source_url TEXT,
  source_name TEXT,
  price DECIMAL,
  currency TEXT,
  category TEXT,
  colors JSONB,
  metadata JSONB
) AS $$
BEGIN
  RETURN QUERY
  SELECT
    ci.id,
    ci.title,
    ci.description,
    ci.image_url,
    ci.thumbnail_url,
    ci.image_width,
    ci.image_height,
    ci.source_url,
    ci.source_name,
    ci.price,
    ci.currency,
    ci.category,
    ci.colors,
    ci.metadata
  FROM collection_items ci
  JOIN collections c ON c.id = ci.collection_id
  WHERE ci.collection_id = p_collection_id
    AND ci.is_active = true
    AND c.is_active = true
  ORDER BY ci.sort_order ASC, ci.created_at DESC
  LIMIT p_limit
  OFFSET p_offset;
END;
$$ LANGUAGE plpgsql SECURITY DEFINER;
```

---

## 5. –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å

### 5.1 Telegram Bot (MVP)

#### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–º–∞–Ω–¥:

```
/start - –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
/collections - –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –ø–æ–¥–±–æ—Ä–æ–∫
/newcollection - –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –ø–æ–¥–±–æ—Ä–∫—É
/additem <collection_id> - –î–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä –≤ –ø–æ–¥–±–æ—Ä–∫—É
/editcollection <id> - –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ–¥–±–æ—Ä–∫—É
/deletecollection <id> - –£–¥–∞–ª–∏—Ç—å –ø–æ–¥–±–æ—Ä–∫—É
/publish <id> - –û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –ø–æ–¥–±–æ—Ä–∫—É
/unpublish <id> - –°–Ω—è—Ç—å —Å –ø—É–±–ª–∏–∫–∞—Ü–∏–∏
/stats - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
```

#### Flow —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ–¥–±–æ—Ä–∫–∏:

```
–ê–¥–º–∏–Ω: /newcollection

–ë–æ—Ç: üì¶ –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π –ø–æ–¥–±–æ—Ä–∫–∏
     –í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ (RU):

–ê–¥–º–∏–Ω: Y2K Guy

–ë–æ—Ç: ‚úÖ –ù–∞–∑–≤–∞–Ω–∏–µ: Y2K Guy
     –í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ (EN) –∏–ª–∏ /skip:

–ê–¥–º–∏–Ω: /skip

–ë–æ—Ç: üé® –í—ã–±–µ—Ä–∏—Ç–µ –≥—Ä–∞–¥–∏–µ–Ω—Ç –∏–ª–∏ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ 2 —Ü–≤–µ—Ç–∞ (#hex #hex):
     [–§–∏–æ–ª–µ—Ç–æ–≤—ã–π] [–°–∏–Ω–∏–π] [–ó–µ–ª–µ–Ω—ã–π] [–û—Ä–∞–Ω–∂–µ–≤—ã–π] [–†–æ–∑–æ–≤—ã–π]

–ê–¥–º–∏–Ω: [–†–æ–∑–æ–≤—ã–π]

–ë–æ—Ç: üñº –û—Ç–ø—Ä–∞–≤—å—Ç–µ –±–∞–Ω–Ω–µ—Ä (–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ) –∏–ª–∏ /skip:

–ê–¥–º–∏–Ω: [–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ñ–æ—Ç–æ]

–ë–æ—Ç: ‚úÖ –ü–æ–¥–±–æ—Ä–∫–∞ "Y2K Guy" —Å–æ–∑–¥–∞–Ω–∞!
     ID: 550e8400-e29b-41d4-a716-446655440000
     –°—Ç–∞—Ç—É—Å: –ß–µ—Ä–Ω–æ–≤–∏–∫

     –î–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä—ã: /additem 550e8400
```

#### Flow –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–∞:

```
–ê–¥–º–∏–Ω: /additem 550e8400

–ë–æ—Ç: üì¶ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞ –≤ "Y2K Guy"
     –û—Ç–ø—Ä–∞–≤—å—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞:

–ê–¥–º–∏–Ω: [–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ñ–æ—Ç–æ]

–ë–æ—Ç: ‚úÖ –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∑–∞–≥—Ä—É–∂–µ–Ω–æ
     –í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞:

–ê–¥–º–∏–Ω: IYTR Men's Windbreaker Jacket

–ë–æ—Ç: üí∞ –í–≤–µ–¥–∏—Ç–µ —Ü–µ–Ω—É (–Ω–∞–ø—Ä–∏–º–µ—Ä: 21.49 USD):

–ê–¥–º–∏–Ω: 21.49 USD

–ë–æ—Ç: üîó –í–≤–µ–¥–∏—Ç–µ —Å—Å—ã–ª–∫—É –Ω–∞ —Ç–æ–≤–∞—Ä:

–ê–¥–º–∏–Ω: https://amazon.com/dp/B0xxx

–ë–æ—Ç: üè™ –û–ø—Ä–µ–¥–µ–ª—ë–Ω –º–∞–≥–∞–∑–∏–Ω: Amazon
     –ö–∞—Ç–µ–≥–æ—Ä–∏—è —Ç–æ–≤–∞—Ä–∞:
     [–í–µ—Ä—Ö] [–ù–∏–∑] [–í–µ—Ä—Ö–Ω—è—è –æ–¥–µ–∂–¥–∞] [–û–±—É–≤—å] [–ê–∫—Å–µ—Å—Å—É–∞—Ä—ã]

–ê–¥–º–∏–Ω: [–í–µ—Ä—Ö–Ω—è—è –æ–¥–µ–∂–¥–∞]

–ë–æ—Ç: ‚úÖ –¢–æ–≤–∞—Ä –¥–æ–±–∞–≤–ª–µ–Ω –≤ –ø–æ–¥–±–æ—Ä–∫—É "Y2K Guy"!
     –í—Å–µ–≥–æ —Ç–æ–≤–∞—Ä–æ–≤: 1

     –î–æ–±–∞–≤–∏—Ç—å –µ—â—ë: /additem 550e8400
     –û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å: /publish 550e8400
```

#### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ TG-–±–æ—Ç–∞:

```
telegram-bot/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ index.ts              # Entry point
‚îÇ   ‚îú‚îÄ‚îÄ bot.ts                # Telegraf bot setup
‚îÇ   ‚îú‚îÄ‚îÄ commands/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ start.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ collections.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ newCollection.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ addItem.ts
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ   ‚îú‚îÄ‚îÄ scenes/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ createCollectionScene.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ addItemScene.ts
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ   ‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ supabaseService.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ storageService.ts
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ   ‚îú‚îÄ‚îÄ utils/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ validators.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ formatters.ts
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ   ‚îî‚îÄ‚îÄ types/
‚îÇ       ‚îî‚îÄ‚îÄ index.ts
‚îú‚îÄ‚îÄ package.json
‚îú‚îÄ‚îÄ tsconfig.json
‚îî‚îÄ‚îÄ Dockerfile
```

### 5.2 Web Admin Panel (Phase 2)

#### Tech Stack:

- **Framework:** Next.js 14 (App Router)
- **UI:** Tailwind CSS + shadcn/ui
- **Auth:** Supabase Auth
- **State:** React Query
- **Deploy:** Vercel

#### Features:

- Dashboard —Å –º–µ—Ç—Ä–∏–∫–∞–º–∏
- CRUD –¥–ª—è –ø–æ–¥–±–æ—Ä–æ–∫
- Drag & drop –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- Bulk import (CSV)
- Preview –∫–∞—Ä—Ç–æ—á–µ–∫
- –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ (–ø—Ä–æ—Å–º–æ—Ç—Ä—ã, –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤ –≥–∞—Ä–¥–µ—Ä–æ–±)

---

## 6. Frontend (React Native)

### 6.1 –ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã

```
components/
‚îú‚îÄ‚îÄ collections/
‚îÇ   ‚îú‚îÄ‚îÄ CollectionsCarousel.tsx      # –ö–∞—Ä—É—Å–µ–ª—å –Ω–∞ –≥–ª–∞–≤–Ω–æ–π
‚îÇ   ‚îú‚îÄ‚îÄ CollectionTile.tsx           # –ü–ª–∏—Ç–∫–∞ –ø–æ–¥–±–æ—Ä–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ CollectionMasonry.tsx        # Masonry-—Å–µ—Ç–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ CollectionItemCard.tsx       # –ö–∞—Ä—Ç–æ—á–∫–∞ —Ç–æ–≤–∞—Ä–∞ –≤ —Å–µ—Ç–∫–µ

app/
‚îú‚îÄ‚îÄ collection/
‚îÇ   ‚îú‚îÄ‚îÄ [id].tsx                     # –°—Ç—Ä–∞–Ω–∏—Ü–∞ –ø–æ–¥–±–æ—Ä–∫–∏ (masonry list)
‚îÇ   ‚îî‚îÄ‚îÄ item/
‚îÇ       ‚îî‚îÄ‚îÄ [itemId].tsx             # –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Ç–æ–≤–∞—Ä–∞

services/
‚îú‚îÄ‚îÄ collections/
‚îÇ   ‚îú‚îÄ‚îÄ collectionService.ts         # CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏
‚îÇ   ‚îî‚îÄ‚îÄ index.ts

store/
‚îú‚îÄ‚îÄ collections/
‚îÇ   ‚îî‚îÄ‚îÄ collectionsStore.ts          # Zustand store (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

types/
‚îú‚îÄ‚îÄ models/
‚îÇ   ‚îî‚îÄ‚îÄ collection.ts                # –¢–∏–ø—ã –¥–ª—è –ø–æ–¥–±–æ—Ä–æ–∫
```

### 6.2 –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

#### CollectionsCarousel.tsx

```typescript
// components/collections/CollectionsCarousel.tsx

import { Collection } from '@/types/models/collection';
import { LinearGradient } from 'expo-linear-gradient';
import { useRouter } from 'expo-router';
import React, { useEffect, useRef, useState } from 'react';
import {
  Dimensions,
  FlatList,
  Image,
  StyleSheet,
  Text,
  TouchableOpacity,
  View,
} from 'react-native';
import { collectionService } from '@/services/collections';

const { width: SCREEN_WIDTH } = Dimensions.get('window');
const TILE_WIDTH = SCREEN_WIDTH - 64;
const TILE_HEIGHT = 160;
const TILE_GAP = 16;

export default function CollectionsCarousel() {
  const router = useRouter();
  const flatListRef = useRef<FlatList>(null);
  const [collections, setCollections] = useState<Collection[]>([]);
  const [loading, setLoading] = useState(true);

  useEffect(() => {
    loadCollections();
  }, []);

  const loadCollections = async () => {
    try {
      const data = await collectionService.getActiveCollections();
      setCollections(data);
    } catch (error) {
      console.error('Failed to load collections:', error);
    } finally {
      setLoading(false);
    }
  };

  // Infinite loop data
  const infiniteData = collections.length > 0
    ? [...collections, ...collections, ...collections]
    : [];
  const dataLength = collections.length;

  useEffect(() => {
    if (dataLength > 0 && flatListRef.current) {
      flatListRef.current.scrollToIndex({
        index: dataLength,
        animated: false,
      });
    }
  }, [dataLength]);

  const handleCollectionPress = (collection: Collection) => {
    router.push(`/collection/${collection.id}`);
  };

  const onScroll = (event: any) => {
    const offsetX = event.nativeEvent.contentOffset.x;
    const index = Math.round(offsetX / (TILE_WIDTH + TILE_GAP));

    if (index <= 0 || index >= dataLength * 2) {
      flatListRef.current?.scrollToIndex({
        index: dataLength,
        animated: false,
      });
    }
  };

  const renderTile = ({ item }: { item: Collection }) => (
    <TouchableOpacity
      style={styles.tile}
      onPress={() => handleCollectionPress(item)}
      activeOpacity={0.95}
    >
      <LinearGradient
        colors={[...item.gradient, item.gradient[1]]}
        start={{ x: 0, y: 0 }}
        end={{ x: 1, y: 1 }}
        style={styles.gradient}
      >
        {item.bannerUrl && (
          <Image
            source={{ uri: item.bannerUrl }}
            style={styles.bannerImage}
            resizeMode="cover"
          />
        )}
        <View style={styles.overlay}>
          <Text style={styles.title}>{item.title}</Text>
          <Text style={styles.itemsCount}>{item.itemsCount} items</Text>
        </View>
      </LinearGradient>
    </TouchableOpacity>
  );

  if (loading || collections.length === 0) {
    return null;
  }

  return (
    <View style={styles.container}>
      <FlatList
        ref={flatListRef}
        data={infiniteData}
        renderItem={renderTile}
        keyExtractor={(item, index) => `${item.id}-${index}`}
        horizontal
        showsHorizontalScrollIndicator={false}
        contentContainerStyle={styles.listContent}
        snapToInterval={TILE_WIDTH + TILE_GAP}
        decelerationRate="fast"
        snapToAlignment="center"
        onScroll={onScroll}
        scrollEventThrottle={16}
        getItemLayout={(data, index) => ({
          length: TILE_WIDTH + TILE_GAP,
          offset: (TILE_WIDTH + TILE_GAP) * index,
          index,
        })}
        ItemSeparatorComponent={() => <View style={{ width: TILE_GAP }} />}
      />
    </View>
  );
}

const styles = StyleSheet.create({
  container: {
    marginTop: 16,
    marginBottom: 8,
  },
  listContent: {
    paddingHorizontal: 32,
  },
  tile: {
    width: TILE_WIDTH,
    height: TILE_HEIGHT,
    borderRadius: 20,
    overflow: 'hidden',
    shadowColor: '#000',
    shadowOffset: { width: 0, height: 4 },
    shadowOpacity: 0.15,
    shadowRadius: 8,
    elevation: 6,
  },
  gradient: {
    flex: 1,
    justifyContent: 'flex-end',
  },
  bannerImage: {
    ...StyleSheet.absoluteFillObject,
    opacity: 0.7,
  },
  overlay: {
    padding: 16,
    backgroundColor: 'rgba(0,0,0,0.3)',
  },
  title: {
    fontSize: 24,
    fontWeight: '700',
    color: '#fff',
    textShadowColor: 'rgba(0, 0, 0, 0.3)',
    textShadowOffset: { width: 0, height: 1 },
    textShadowRadius: 3,
  },
  itemsCount: {
    fontSize: 14,
    color: 'rgba(255,255,255,0.8)',
    marginTop: 4,
  },
});
```

#### Collection Screen (Masonry)

```typescript
// app/collection/[id].tsx

import { CollectionItem } from '@/types/models/collection';
import { collectionService } from '@/services/collections';
import { Ionicons } from '@expo/vector-icons';
import { router, useLocalSearchParams } from 'expo-router';
import React, { useCallback, useEffect, useState } from 'react';
import {
  ActivityIndicator,
  Dimensions,
  Image,
  ScrollView,
  StyleSheet,
  Text,
  TouchableOpacity,
  View,
} from 'react-native';

const { width: SCREEN_WIDTH } = Dimensions.get('window');
const COLUMN_GAP = 12;
const PADDING = 16;
const COLUMN_WIDTH = (SCREEN_WIDTH - PADDING * 2 - COLUMN_GAP) / 2;

export default function CollectionScreen() {
  const { id } = useLocalSearchParams<{ id: string }>();
  const [collection, setCollection] = useState<Collection | null>(null);
  const [items, setItems] = useState<CollectionItem[]>([]);
  const [loading, setLoading] = useState(true);

  useEffect(() => {
    loadCollection();
  }, [id]);

  const loadCollection = async () => {
    if (!id) return;
    try {
      const [collectionData, itemsData] = await Promise.all([
        collectionService.getCollectionById(id),
        collectionService.getCollectionItems(id),
      ]);
      setCollection(collectionData);
      setItems(itemsData);
    } catch (error) {
      console.error('Failed to load collection:', error);
    } finally {
      setLoading(false);
    }
  };

  const handleItemPress = (item: CollectionItem) => {
    router.push(`/collection/item/${item.id}`);
  };

  // Masonry layout calculation
  const getMasonryColumns = useCallback(() => {
    const leftColumn: CollectionItem[] = [];
    const rightColumn: CollectionItem[] = [];
    let leftHeight = 0;
    let rightHeight = 0;

    items.forEach((item) => {
      // Estimate item height (image + text)
      const aspectRatio =
        item.imageWidth && item.imageHeight
          ? item.imageHeight / item.imageWidth
          : 1.2; // fallback ratio
      const imageHeight = COLUMN_WIDTH * aspectRatio;
      const textHeight = 60;
      const itemHeight = imageHeight + textHeight;

      if (leftHeight <= rightHeight) {
        leftColumn.push(item);
        leftHeight += itemHeight + 12;
      } else {
        rightColumn.push(item);
        rightHeight += itemHeight + 12;
      }
    });

    return [leftColumn, rightColumn];
  }, [items]);

  const [leftColumn, rightColumn] = getMasonryColumns();

  const renderItem = (item: CollectionItem) => {
    const aspectRatio =
      item.imageWidth && item.imageHeight
        ? item.imageHeight / item.imageWidth
        : 1.2;
    const imageHeight = COLUMN_WIDTH * aspectRatio;

    return (
      <TouchableOpacity
        key={item.id}
        style={styles.itemCard}
        onPress={() => handleItemPress(item)}
        activeOpacity={0.8}
      >
        <Image
          source={{ uri: item.thumbnailUrl || item.imageUrl }}
          style={[styles.itemImage, { height: imageHeight }]}
          resizeMode="cover"
        />
        <View style={styles.itemInfo}>
          <Text style={styles.itemTitle} numberOfLines={2}>
            {item.title}
          </Text>
          <View style={styles.priceRow}>
            <Text style={styles.itemPrice}>
              {item.currency === 'USD' ? '$' : '‚ÇΩ'}{item.price?.toFixed(2)}
            </Text>
            <Text style={styles.storeName}>{item.sourceName}</Text>
          </View>
        </View>
      </TouchableOpacity>
    );
  };

  if (loading) {
    return (
      <View style={styles.loadingContainer}>
        <ActivityIndicator size="large" color="#000" />
      </View>
    );
  }

  return (
    <View style={styles.container}>
      {/* Header */}
      <View style={styles.header}>
        <TouchableOpacity onPress={() => router.back()} style={styles.backButton}>
          <Ionicons name="arrow-back" size={24} color="#000" />
        </TouchableOpacity>
        <Text style={styles.headerTitle}>{collection?.title}</Text>
        <View style={styles.headerRight} />
      </View>

      {/* Banner */}
      {collection?.bannerUrl && (
        <Image
          source={{ uri: collection.bannerUrl }}
          style={styles.banner}
          resizeMode="cover"
        />
      )}

      {/* Masonry Grid */}
      <ScrollView
        style={styles.scrollView}
        contentContainerStyle={styles.scrollContent}
        showsVerticalScrollIndicator={false}
      >
        <View style={styles.masonryContainer}>
          <View style={styles.column}>
            {leftColumn.map(renderItem)}
          </View>
          <View style={styles.column}>
            {rightColumn.map(renderItem)}
          </View>
        </View>
      </ScrollView>
    </View>
  );
}

const styles = StyleSheet.create({
  container: {
    flex: 1,
    backgroundColor: '#000',
  },
  loadingContainer: {
    flex: 1,
    justifyContent: 'center',
    alignItems: 'center',
    backgroundColor: '#000',
  },
  header: {
    flexDirection: 'row',
    alignItems: 'center',
    justifyContent: 'space-between',
    paddingHorizontal: 16,
    paddingTop: 60,
    paddingBottom: 16,
  },
  backButton: {
    width: 40,
    height: 40,
    borderRadius: 20,
    backgroundColor: 'rgba(255,255,255,0.1)',
    justifyContent: 'center',
    alignItems: 'center',
  },
  headerTitle: {
    fontSize: 18,
    fontWeight: '600',
    color: '#fff',
  },
  headerRight: {
    width: 40,
  },
  banner: {
    width: SCREEN_WIDTH,
    height: 180,
  },
  scrollView: {
    flex: 1,
  },
  scrollContent: {
    padding: PADDING,
  },
  masonryContainer: {
    flexDirection: 'row',
    gap: COLUMN_GAP,
  },
  column: {
    flex: 1,
    gap: 12,
  },
  itemCard: {
    backgroundColor: '#fff',
    borderRadius: 12,
    overflow: 'hidden',
  },
  itemImage: {
    width: '100%',
    aspectRatio: 0.8,
  },
  itemInfo: {
    padding: 12,
  },
  itemTitle: {
    fontSize: 14,
    fontWeight: '500',
    color: '#000',
    marginBottom: 4,
  },
  priceRow: {
    flexDirection: 'row',
    alignItems: 'center',
    justifyContent: 'space-between',
  },
  itemPrice: {
    fontSize: 16,
    fontWeight: '700',
    color: '#000',
  },
  storeName: {
    fontSize: 12,
    color: '#666',
  },
});
```

### 6.3 Service Layer

```typescript
// services/collections/collectionService.ts

import { supabase } from '@/lib/supabase/client';
import { Collection, CollectionItem } from '@/types/models/collection';

class CollectionService {
  /**
   * Get all active collections for carousel
   */
  async getActiveCollections(): Promise<Collection[]> {
    const { data, error } = await supabase.rpc('get_active_collections');

    if (error) {
      console.error('[CollectionService] Error fetching collections:', error);
      throw error;
    }

    return (data || []).map(this.mapToCollection);
  }

  /**
   * Get collection by ID
   */
  async getCollectionById(id: string): Promise<Collection | null> {
    const { data, error } = await supabase
      .from('collections')
      .select('*')
      .eq('id', id)
      .eq('is_active', true)
      .single();

    if (error) {
      console.error('[CollectionService] Error fetching collection:', error);
      return null;
    }

    return this.mapToCollection(data);
  }

  /**
   * Get items for a collection with pagination
   */
  async getCollectionItems(
    collectionId: string,
    limit = 50,
    offset = 0,
  ): Promise<CollectionItem[]> {
    const { data, error } = await supabase.rpc('get_collection_items', {
      p_collection_id: collectionId,
      p_limit: limit,
      p_offset: offset,
    });

    if (error) {
      console.error('[CollectionService] Error fetching items:', error);
      throw error;
    }

    return (data || []).map(this.mapToCollectionItem);
  }

  /**
   * Get single collection item by ID
   */
  async getCollectionItemById(itemId: string): Promise<CollectionItem | null> {
    const { data, error } = await supabase
      .from('collection_items')
      .select(
        `
        *,
        collections!inner(is_active)
      `,
      )
      .eq('id', itemId)
      .eq('is_active', true)
      .single();

    if (error || !data?.collections?.is_active) {
      console.error('[CollectionService] Error fetching item:', error);
      return null;
    }

    return this.mapToCollectionItem(data);
  }

  /**
   * Add collection item to user's wardrobe
   */
  async addItemToWardrobe(item: CollectionItem, userId: string): Promise<string> {
    // CRITICAL (Obrazz offline-first): wardrobe item creation expects a LOCAL imageUri.
    // Current itemService.saveImageLocally() –∫–æ–ø–∏—Ä—É–µ—Ç —Ñ–∞–π–ª —á–µ—Ä–µ–∑ expo-file-system,
    // –ø–æ—ç—Ç–æ–º—É http(s) URL –Ω–∞–ø—Ä—è–º—É—é –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –Ω–µ–ª—å–∑—è.
    const { downloadImageFromUrl } = await import('@/services/shopping/webCaptureService');
    const { itemServiceOffline } = await import('@/services/wardrobe/itemServiceOffline');

    const localUri = await downloadImageFromUrl(item.imageUrl);

    const wardrobeItem = await itemServiceOffline.createItem({
      userId,
      title: item.title,
      category: (item.category as any) || 'other',
      colors: item.colors?.length ? item.colors.map((c) => ({ hex: c.hex })) : [{ hex: '#CCCCCC' }],
      primaryColor: item.colors?.[0] ? { hex: item.colors[0].hex } : { hex: '#CCCCCC' },
      styles: [],
      seasons: [],
      imageUri: localUri,
      price: item.price,
      metadata: {
        source: 'web',
        sourceUrl: item.sourceUrl,
        sourceName: item.sourceName,
      },
    });

    return wardrobeItem.id;
  }

  // Mappers
  private mapToCollection(data: any): Collection {
    return {
      id: data.id,
      title: data.title,
      titleEn: data.title_en,
      description: data.description,
      bannerUrl: data.banner_url,
      gradient: data.gradient || ['#667eea', '#764ba2'],
      sortOrder: data.sort_order || 0,
      isActive: data.is_active,
      itemsCount: data.items_count || 0,
      createdAt: new Date(data.created_at),
      updatedAt: new Date(data.updated_at),
    };
  }

  private mapToCollectionItem(data: any): CollectionItem {
    return {
      id: data.id,
      collectionId: data.collection_id,
      title: data.title,
      description: data.description,
      imageUrl: data.image_url,
      thumbnailUrl: data.thumbnail_url,
      imageWidth: data.image_width,
      imageHeight: data.image_height,
      sourceUrl: data.source_url,
      sourceName: data.source_name,
      price: data.price,
      currency: data.currency || 'USD',
      category: data.category,
      colors: data.colors || [],
      sortOrder: data.sort_order || 0,
      isActive: data.is_active,
      metadata: data.metadata || {},
      createdAt: new Date(data.created_at),
      updatedAt: new Date(data.updated_at),
    };
  }
}

export const collectionService = new CollectionService();
```

---

## 7. –ü–æ—à–∞–≥–æ–≤—ã–π –ø–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### Phase 1: Backend Foundation (3-4 –¥–Ω—è)

| #   | –ó–∞–¥–∞—á–∞                                                                     | –û—Ü–µ–Ω–∫–∞ | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç |
| --- | -------------------------------------------------------------------------- | ------ | --------- |
| 1.1 | –°–æ–∑–¥–∞—Ç—å SQL –º–∏–≥—Ä–∞—Ü–∏–∏ –¥–ª—è —Ç–∞–±–ª–∏—Ü collections, collection_items, admin_users | 2—á     | P0        |
| 1.2 | –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ –≤ Supabase                                              | 30–º    | P0        |
| 1.3 | –ù–∞—Å—Ç—Ä–æ–∏—Ç—å RLS policies                                                     | 1—á     | P0        |
| 1.4 | –°–æ–∑–¥–∞—Ç—å Storage bucket 'collections' —Å policies                            | 30–º    | P0        |
| 1.5 | –°–æ–∑–¥–∞—Ç—å database functions (get_active_collections, get_collection_items)  | 1—á     | P0        |
| 1.6 | –î–æ–±–∞–≤–∏—Ç—å triggers –¥–ª—è items_count –∏ updated_at                             | 30–º    | P0        |
| 1.7 | –°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ (2-3 –ø–æ–¥–±–æ—Ä–∫–∏, 10+ —Ç–æ–≤–∞—Ä–æ–≤)                        | 1—á     | P1        |

### Phase 2: Mobile App - Core Features (4-5 –¥–Ω–µ–π)

| #    | –ó–∞–¥–∞—á–∞                                                                | –û—Ü–µ–Ω–∫–∞ | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç |
| ---- | --------------------------------------------------------------------- | ------ | --------- |
| 2.1  | –°–æ–∑–¥–∞—Ç—å types/models/collection.ts                                    | 30–º    | P0        |
| 2.2  | –°–æ–∑–¥–∞—Ç—å services/collections/collectionService.ts                     | 2—á     | P0        |
| 2.3  | –°–æ–∑–¥–∞—Ç—å components/collections/CollectionsCarousel.tsx                | 3—á     | P0        |
| 2.4  | –ó–∞–º–µ–Ω–∏—Ç—å StylesCarousel –Ω–∞ CollectionsCarousel –≤ app/(tabs)/index.tsx | 30–º    | P0        |
| 2.5  | –°–æ–∑–¥–∞—Ç—å app/collection/[id].tsx (—Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ø–æ–¥–±–æ—Ä–∫–∏ —Å masonry)         | 4—á     | P0        |
| 2.6  | –°–æ–∑–¥–∞—Ç—å app/collection/item/[itemId].tsx (–¥–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Ç–æ–≤–∞—Ä–∞)  | 3—á     | P0        |
| 2.7  | –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å "Add to Wardrobe" —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª                              | 2—á     | P0        |
| 2.8  | –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å "Open in Store" (Linking.openURL)                         | 30–º    | P0        |
| 2.9  | –î–æ–±–∞–≤–∏—Ç—å loading states –∏ error handling                              | 1—á     | P1        |
| 2.10 | –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö                                           | 2—á     | P1        |

### Phase 3: Telegram Bot Admin (3-4 –¥–Ω—è)

| #    | –ó–∞–¥–∞—á–∞                                                 | –û—Ü–µ–Ω–∫–∞ | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç |
| ---- | ------------------------------------------------------ | ------ | --------- |
| 3.1  | –°–æ–∑–¥–∞—Ç—å Node.js –ø—Ä–æ–µ–∫—Ç telegram-bot                    | 1—á     | P0        |
| 3.2  | –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Telegraf + TypeScript                        | 1—á     | P0        |
| 3.3  | –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å auth (–ø—Ä–æ–≤–µ—Ä–∫–∞ admin_users –ø–æ telegram_id) | 1—á     | P0        |
| 3.4  | –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∫–æ–º–∞–Ω–¥—É /collections (—Å–ø–∏—Å–æ–∫)              | 1—á     | P0        |
| 3.5  | –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å scene –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ–¥–±–æ—Ä–∫–∏                | 3—á     | P0        |
| 3.6  | –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å scene –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–∞                | 3—á     | P0        |
| 3.7  | –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∑–∞–≥—Ä—É–∑–∫—É –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –≤ Supabase Storage    | 2—á     | P0        |
| 3.8  | –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å /publish –∏ /unpublish –∫–æ–º–∞–Ω–¥—ã              | 1—á     | P1        |
| 3.9  | –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å /delete –∫–æ–º–∞–Ω–¥—ã                            | 1—á     | P1        |
| 3.10 | –î–µ–ø–ª–æ–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä (Railway/Render)                      | 2—á     | P1        |

### Phase 4: Polish & Launch (2-3 –¥–Ω—è)

| #   | –ó–∞–¥–∞—á–∞                                                   | –û—Ü–µ–Ω–∫–∞ | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç |
| --- | -------------------------------------------------------- | ------ | --------- |
| 4.1 | –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∫–∞—Ä—É—Å–µ–ª–∏                  | 2—á     | P1        |
| 4.2 | –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ Zustand store                       | 2—á     | P2        |
| 4.3 | –î–æ–±–∞–≤–∏—Ç—å pull-to-refresh –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –ø–æ–¥–±–æ—Ä–∫–∏            | 1—á     | P2        |
| 4.4 | –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è (RU/EN) –¥–ª—è UI                               | 2—á     | P2        |
| 4.5 | –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤ (–∫–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–æ—Ç–∞) | 1—á     | P1        |
| 4.6 | –ù–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º (–º–∏–Ω–∏–º—É–º 5 –ø–æ–¥–±–æ—Ä–æ–∫ –ø–æ 15+ —Ç–æ–≤–∞—Ä–æ–≤) | 4—á     | P1        |
| 4.7 | –§–∏–Ω–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ                                   | 2—á     | P0        |

### Phase 5: Web Admin Panel (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, +7-10 –¥–Ω–µ–π)

| #   | –ó–∞–¥–∞—á–∞                                        | –û—Ü–µ–Ω–∫–∞ |
| --- | --------------------------------------------- | ------ |
| 5.1 | –°–æ–∑–¥–∞—Ç—å Next.js –ø—Ä–æ–µ–∫—Ç —Å Tailwind + shadcn/ui | 3—á     |
| 5.2 | –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Supabase Auth                       | 2—á     |
| 5.3 | Dashboard —Å–æ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π                      | 4—á     |
| 5.4 | CRUD –¥–ª—è –ø–æ–¥–±–æ—Ä–æ–∫ —Å drag&drop –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π     | 8—á     |
| 5.5 | CRUD –¥–ª—è —Ç–æ–≤–∞—Ä–æ–≤ —Å bulk import                | 6—á     |
| 5.6 | Preview –∫–∞—Ä—Ç–æ—á–µ–∫ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏           | 4—á     |
| 5.7 | –î–µ–ø–ª–æ–π –Ω–∞ Vercel                              | 1—á     |

---

## 8. API Reference

### 8.1 Supabase RPC Functions

```typescript
// Get active collections
supabase.rpc('get_active_collections');
// Returns: { id, title, title_en, banner_url, gradient, items_count, sort_order }[]

// Get collection items
supabase.rpc('get_collection_items', {
  p_collection_id: 'uuid',
  p_limit: 20,
  p_offset: 0,
});
// Returns: { id, title, description, image_url, thumbnail_url, image_width, image_height, source_url, source_name, price, currency, category, colors, metadata }[]
```

### 8.2 Direct Table Access

```typescript
// Get single collection
supabase.from('collections').select('*').eq('id', collectionId).eq('is_active', true).single();

// Get single item
supabase
  .from('collection_items')
  .select('*, collections!inner(is_active)')
  .eq('id', itemId)
  .eq('is_active', true)
  .single();
```

---

## 9. UI/UX —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏

### 9.1 –ö–∞—Ä—É—Å–µ–ª—å –ø–æ–¥–±–æ—Ä–æ–∫ (–ì–ª–∞–≤–Ω–∞—è)

- **–†–∞–∑–º–µ—Ä –ø–ª–∏—Ç–∫–∏:** `SCREEN_WIDTH - 64px` √ó `160px`
- **Border radius:** `20px`
- **Spacing:** `16px` –º–µ–∂–¥—É –ø–ª–∏—Ç–∫–∞–º–∏
- **Padding:** `32px` –ø–æ –∫—Ä–∞—è–º
- **Snap:** –ö —Ü–µ–Ω—Ç—Ä—É, decelerationRate="fast"
- **Infinite scroll:** –î–∞ (3x data duplication)
- **Gradient overlay:** –°–Ω–∏–∑—É, –¥–ª—è —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏ —Ç–µ–∫—Å—Ç–∞
- **Typography:**
  - Title: 24px, bold, white, shadow
  - Items count: 14px, white 80% opacity

### 9.2 Masonry Grid (–°—Ç—Ä–∞–Ω–∏—Ü–∞ –ø–æ–¥–±–æ—Ä–∫–∏)

- **Columns:** 2
- **Gap:** `12px`
- **Padding:** `16px`
- **Card background:** `#FFFFFF`
- **Card border-radius:** `12px`
- **Image aspect ratio:** ~0.8 (–≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–µ)
- **Typography:**
  - Title: 14px, medium, 2 lines max
  - Price: 16px, bold
  - Store: 12px, gray

### 9.3 Item Detail Screen

- **Layout:** –ü–æ—Ö–æ–∂ –Ω–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π `app/item/[id].tsx`
- **Image:** Fullscreen —Å overlay buttons
- **Actions:**
  - "Add to Wardrobe" ‚Äî primary button, blue
  - "Open in Store" ‚Äî secondary button, outline
- **Info cards:**
  - Price + Store
  - Category (–µ—Å–ª–∏ –µ—Å—Ç—å)
  - Brand (–µ—Å–ª–∏ –µ—Å—Ç—å)

---

## 10. –ü—Ä–∏–º–µ—á–∞–Ω–∏—è –∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### 10.1 –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

- –î–ª—è Masonry –∏—Å–ø–æ–ª—å–∑—É–π `thumbnail_url` (–µ—Å–ª–∏ –µ—Å—Ç—å), –∞ `image_url` ‚Äî –Ω–∞ detail
- –ù–∞ –∞–¥–º–∏–Ω–∫–µ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —Å–æ—Ö—Ä–∞–Ω—è–π: full + thumb + `image_width`/`image_height`
- –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –ø–æ–∑–∂–µ: `expo-image` –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è (–Ω–µ –±–ª–æ–∫–µ—Ä –¥–ª—è MVP)

### 10.2 Offline Support

- –ü–æ–¥–±–æ—Ä–∫–∏ ‚Äî **online-first** (–±–µ–∑ –æ—á–µ—Ä–µ–¥–µ–π –Ω–∞ –∑–∞–ø–∏—Å—å)
- –î–ª—è –ª—É—á—à–µ–≥–æ UX –º–æ–∂–Ω–æ –∫—ç—à–∏—Ä–æ–≤–∞—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–π —É—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç (read-only) –∏ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –µ–≥–æ offline + –±–∞–Ω–Ω–µ—Ä ‚Äú–Ω–µ—Ç —Å–µ—Ç–∏‚Äù

### 10.3 Analytics (–±—É–¥—É—â–µ–µ)

–î–æ–±–∞–≤–∏—Ç—å —Å–æ–±—ã—Ç–∏—è:

- `collection_viewed` ‚Äî –ø—Ä–æ—Å–º–æ—Ç—Ä –ø–æ–¥–±–æ—Ä–∫–∏
- `collection_item_viewed` ‚Äî –ø—Ä–æ—Å–º–æ—Ç—Ä —Ç–æ–≤–∞—Ä–∞
- `collection_item_added` ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –≥–∞—Ä–¥–µ—Ä–æ–±
- `collection_item_opened` ‚Äî –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ —Å–∞–π—Ç –º–∞–≥–∞–∑–∏–Ω–∞

### 10.4 –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –∫–ª–∞–¥—ë–º `SUPABASE_SERVICE_ROLE_KEY` –≤ –º–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
- –í—Å–µ write-–æ–ø–µ—Ä–∞—Ü–∏–∏ –∞–¥–º–∏–Ω–∫–∏ (TG/Web) ‚Äî —Ç–æ–ª—å–∫–æ server-side —Å service-role
- RLS:
  - SELECT ‚Äî —Ç–æ–ª—å–∫–æ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω–æ–µ –∏ —Ç–æ–ª—å–∫–æ –¥–ª—è `authenticated`
  - INSERT/UPDATE/DELETE ‚Äî —Ç–æ–ª—å–∫–æ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏–∑ `admin_users` (—Å –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º `WITH CHECK`)
- `admin_users` –Ω–µ–ª—å–∑—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–∑ –∫–ª–∏–µ–Ω—Ç–∞ (—Ç–æ–ª—å–∫–æ service-role), –∫–ª–∏–µ–Ω—Ç—É –º–æ–∂–Ω–æ –¥–∞—Ç—å SELECT —Ç–æ–ª—å–∫–æ —Å–≤–æ–µ–π —Å—Ç—Ä–æ–∫–∏

---

## 11. –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –∫–æ–¥–∞

### –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:

- `GlassBackButton`, `GlassIconButton` ‚Äî –∏–∑ `@components/ui/glass`
- `MasonryGallery` (—á–∞—Å—Ç–∏—á–Ω–æ) ‚Äî –∏–∑ `@components/shopping` (–º–æ–∂–Ω–æ –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å)
- `itemService.createItem()` ‚Äî –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤ –≥–∞—Ä–¥–µ—Ä–æ–±

### –ü–∞—Ç—Ç–µ—Ä–Ω—ã:

- Service layer: `collectionService` —Å–ª–µ–¥—É–µ—Ç –ø–∞—Ç—Ç–µ—Ä–Ω—É `itemService`
- Type mapping: snake_case (DB) ‚Üí camelCase (App)
- Navigation: Expo Router —Å dynamic routes

---

**–ì–æ—Ç–æ–≤–æ –∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏!** üöÄ

–ù–∞—á–∏–Ω–∞—Ç—å —Ä–µ–∫–æ–º–µ–Ω–¥—É—é —Å Phase 1 (Backend) + Phase 2 (Mobile Core), –∑–∞—Ç–µ–º Phase 3 (TG Bot) –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º.
