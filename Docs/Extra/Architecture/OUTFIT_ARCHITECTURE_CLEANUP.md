# üèóÔ∏è OUTFIT SYSTEM - –ê–†–•–ò–¢–ï–ö–¢–£–†–ù–ê–Ø –û–ß–ò–°–¢–ö–ê –ò –†–ï–§–ê–ö–¢–û–†–ò–ù–ì

**–î–∞—Ç–∞:** 2025-11-09  
**–°—Ç–∞—Ç—É—Å:** –¢—Ä–µ–±—É–µ—Ç—Å—è —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –±–∞–≥–æ–≤

## üìÅ –ê–ù–ê–õ–ò–ó –§–ê–ô–õ–û–í–û–ô –°–¢–†–£–ö–¢–£–†–´

### ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

```
/components/outfit/
  ‚îú‚îÄ‚îÄ SmoothCarousel.tsx ‚úÖ (–æ—Å–Ω–æ–≤–Ω–∞—è –∫–∞—Ä—É—Å–µ–ª—å)
  ‚îú‚îÄ‚îÄ CategorySelectorWithSmooth.tsx ‚úÖ (–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∫–∞—Ä—É—Å–µ–ª–µ–π)
  ‚îú‚îÄ‚îÄ ItemSelectionStepNew.tsx ‚úÖ (—à–∞–≥ –≤—ã–±–æ—Ä–∞)
  ‚îú‚îÄ‚îÄ CompositionStep.tsx ‚úÖ (—à–∞–≥ –∫–æ–º–ø–æ–∑–∏—Ü–∏–∏)
  ‚îú‚îÄ‚îÄ OutfitTabBar.tsx ‚úÖ (—Ç–∞–±—ã)
  ‚îî‚îÄ‚îÄ CustomTabManager.tsx ‚ö†Ô∏è (–±–∞–∑–æ–≤–∞—è –≤–µ—Ä—Å–∏—è)

/store/outfit/
  ‚îî‚îÄ‚îÄ outfitStore.ts ‚úÖ (–æ—Å–Ω–æ–≤–Ω–æ–π store)

/services/outfit/
  ‚îî‚îÄ‚îÄ outfitService.ts ‚ö†Ô∏è (–Ω—É–∂–Ω—ã –¥–æ—Ä–∞–±–æ—Ç–∫–∏)

/types/
  ‚îú‚îÄ‚îÄ models/outfit.ts ‚úÖ
  ‚îî‚îÄ‚îÄ components/OutfitCreator.ts ‚úÖ
```

### üî¥ –ü—Ä–æ–±–ª–µ–º–Ω—ã–µ/–æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ —Ñ–∞–π–ª—ã

```
‚ùå /utils/logger/ - –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç —Å–∏—Å—Ç–µ–º–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
‚ùå /services/wardrobe/ - –Ω–µ—Ç –µ–¥–∏–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞ –¥–ª—è wardrobe
‚ùå /tests/outfit/ - –Ω–µ—Ç —Ç–µ—Å—Ç–æ–≤
‚ö†Ô∏è /constants/ - –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç
```

## üßπ –ù–ï–û–ë–•–û–î–ò–ú–ê–Ø –û–ß–ò–°–¢–ö–ê –ö–û–î–ê

### 1. **–î—É–±–ª–∏—Ä—É—é—â–∏–µ—Å—è –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã**

**–ü–†–û–ë–õ–ï–ú–ê:**

```typescript
// constants/outfitTabs.ts
export const DEFAULT_CUSTOM_CATEGORIES = ['tops', 'bottoms', 'footwear'];

// store/outfit/outfitStore.ts
const BASIC_CATEGORIES = ['tops', 'bottoms', 'footwear']; // –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ!
```

**–†–ï–®–ï–ù–ò–ï:**

```typescript
// constants/outfit.ts - –æ–±—ä–µ–¥–∏–Ω–∏—Ç—å –≤—Å–µ outfit –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã
export const OUTFIT_CONSTANTS = {
  BASIC_CATEGORIES: ['tops', 'bottoms', 'footwear'] as ItemCategory[],
  DRESS_CATEGORIES: ['fullbody', 'footwear', 'accessories'] as ItemCategory[],
  DEFAULT_CANVAS: {
    width: 300,
    height: 400,
    aspectRatio: '3:4',
  },
  CAROUSEL_PHYSICS: {
    deceleration: 0.985,
    velocityThreshold: 0.5,
    snapDuration: 200,
  },
};
```

### 2. **–ò–∑–±—ã—Ç–æ—á–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**

**–ü–†–û–ë–õ–ï–ú–ê:** 250+ console.log –ø–æ –≤—Å–µ–º—É –∫–æ–¥—É

**–†–ï–®–ï–ù–ò–ï:** –°–æ–∑–¥–∞—Ç—å –µ–¥–∏–Ω—É—é —Å–∏—Å—Ç–µ–º—É –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

```typescript
// utils/logger/outfitLogger.ts
export enum LogLevel {
  DEBUG = 0,
  INFO = 1,
  WARN = 2,
  ERROR = 3,
}

class OutfitLogger {
  private level: LogLevel = __DEV__ ? LogLevel.DEBUG : LogLevel.ERROR;

  debug(component: string, message: string, data?: any) {
    if (this.level <= LogLevel.DEBUG) {
      console.log(`üîç [${component}] ${message}`, data || '');
    }
  }

  info(component: string, message: string, data?: any) {
    if (this.level <= LogLevel.INFO) {
      console.log(`‚úÖ [${component}] ${message}`, data || '');
    }
  }

  error(component: string, message: string, error?: any) {
    console.error(`‚ùå [${component}] ${message}`, error || '');
  }
}

export const logger = new OutfitLogger();
```

### 3. **–ù–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π/–º–µ—Ä—Ç–≤—ã–π –∫–æ–¥**

**–£–¥–∞–ª–∏—Ç—å:**

```typescript
// outfitStore.ts
- addCategoryToCustom() // –î—É–±–ª–∏—Ä—É–µ—Ç updateCustomTab
- removeCategoryFromCustom() // –î—É–±–ª–∏—Ä—É–µ—Ç updateCustomTab

// SmoothCarousel.tsx
- –í—Å–µ —É–ø–æ–º–∏–Ω–∞–Ω–∏—è flag buttons (—É–∂–µ —É–¥–∞–ª–µ–Ω—ã –≤ UI)
- onCategoryToggle props

// ItemSelectionStepNew.tsx
- –°—Ç–∞—Ä—ã–π –∫–æ–¥ —Å Record —Ç–∏–ø–∞–º–∏ (–∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π)
```

### 4. **–ù–µ—Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å —Ç–∏–ø–æ–≤**

**–ü–†–û–ë–õ–ï–ú–ê:**

```typescript
// –í –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –º–µ—Å—Ç–∞—Ö
selectedItems: Record<ItemCategory, WardrobeItem | null> // –°—Ç–∞—Ä—ã–π —Ç–∏–ø

// –í –¥—Ä—É–≥–∏—Ö –º–µ—Å—Ç–∞—Ö
selectedItems: (WardrobeItem | null)[] // –ù–æ–≤—ã–π —Ç–∏–ø
```

**–†–ï–®–ï–ù–ò–ï:** –ì–ª–æ–±–∞–ª—å–Ω—ã–π –ø–æ–∏—Å–∫ –∏ –∑–∞–º–µ–Ω–∞ –Ω–∞ Array —Ç–∏–ø

### 5. **–û—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è**

**–î–û–ë–ê–í–ò–¢–¨:**

```typescript
// services/outfit/outfitService.ts
private validateOutfitData(outfit: any): boolean {
  if (!outfit?.items || !Array.isArray(outfit.items)) {
    logger.error('OutfitService', 'Invalid outfit items', outfit);
    return false;
  }

  // –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ slot —É–Ω–∏–∫–∞–ª—å–Ω—ã
  const slots = outfit.items.map(i => i.slot);
  const uniqueSlots = new Set(slots);
  if (slots.length !== uniqueSlots.size) {
    logger.error('OutfitService', 'Duplicate slots detected', slots);
    return false;
  }

  return true;
}
```

## üìä –ê–ù–ê–õ–ò–ó –ó–ê–í–ò–°–ò–ú–û–°–¢–ï–ô

### ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ

- `zustand` - state management
- `expo-router` - –Ω–∞–≤–∏–≥–∞—Ü–∏—è
- `@react-native-async-storage/async-storage` - –ª–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ
- `react-native-gesture-handler` - –∂–µ—Å—Ç—ã

### ‚ö†Ô∏è –ü—Ä–æ–±–ª–µ–º–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

- `react-native-draggable-flatlist@4.0.3` - —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω, –Ω–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è drag&drop
- `react-native-haptic-feedback@2.3.3` - —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω, –Ω–æ –Ω–µ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω

### ‚ùå –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

- –°–∏—Å—Ç–µ–º–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (`jest`, `@testing-library/react-native`)
- –í–∞–ª–∏–¥–∞—Ü–∏—è —Å—Ö–µ–º (`zod` –∏–ª–∏ `yup`)

## üîÑ –¶–ò–ö–õ–ò–ß–ï–°–ö–ò–ï –ó–ê–í–ò–°–ò–ú–û–°–¢–ò

**–û–ë–ù–ê–†–£–ñ–ï–ù–û:**

```
outfitStore.ts ‚Üí outfitService.ts ‚Üí types/outfit.ts ‚Üí outfitStore.ts
```

**–†–ï–®–ï–ù–ò–ï:** –í—ã–Ω–µ—Å—Ç–∏ —Ç–∏–ø—ã –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ñ–∞–π–ª –±–µ–∑ –∏–º–ø–æ—Ä—Ç–æ–≤ store

## üéØ –ü–õ–ê–ù –†–ï–§–ê–ö–¢–û–†–ò–ù–ì–ê (–ü–æ—Å–ª–µ –±–∞–≥—Ñ–∏–∫—Å–æ–≤)

### –§–∞–∑–∞ 1: –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ (1 –¥–µ–Ω—å)

1. ‚úÖ –û–±—ä–µ–¥–∏–Ω–∏—Ç—å –¥—É–±–ª–∏—Ä—É—é—â–∏–µ—Å—è –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã
2. ‚úÖ –°–æ–∑–¥–∞—Ç—å —Å–∏—Å—Ç–µ–º—É –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
3. ‚úÖ –£–¥–∞–ª–∏—Ç—å –º–µ—Ä—Ç–≤—ã–π –∫–æ–¥
4. ‚úÖ –ò—Å–ø—Ä–∞–≤–∏—Ç—å —Ç–∏–ø—ã –≤–µ–∑–¥–µ –Ω–∞ Array

### –§–∞–∑–∞ 2: –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è (2 –¥–Ω—è)

1. ‚úÖ –°–æ–∑–¥–∞—Ç—å WardrobeService
2. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é –¥–∞–Ω–Ω—ã—Ö
3. ‚úÖ –†–∞–∑—Ä–µ—à–∏—Ç—å —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
4. ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å drag&drop –¥–ª—è Custom tab

### –§–∞–∑–∞ 3: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (3 –¥–Ω—è)

1. ‚úÖ Unit —Ç–µ—Å—Ç—ã –¥–ª—è services
2. ‚úÖ Unit —Ç–µ—Å—Ç—ã –¥–ª—è store
3. ‚úÖ Integration —Ç–µ—Å—Ç—ã –¥–ª—è outfit flow
4. ‚úÖ E2E —Ç–µ—Å—Ç—ã –æ—Å–Ω–æ–≤–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤

### –§–∞–∑–∞ 4: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è (2 –¥–Ω—è)

1. ‚úÖ –ú–µ–º–æ–∏–∑–∞—Ü–∏—è —Ç—è–∂–µ–ª—ã—Ö –≤—ã—á–∏—Å–ª–µ–Ω–∏–π
2. ‚úÖ Lazy loading –¥–ª—è –∫–∞—Ä—É—Å–µ–ª–µ–π
3. ‚úÖ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ä–µ—Ä–µ–Ω–¥–µ—Ä–æ–≤
4. ‚úÖ –ü—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

## üìà –ú–ï–¢–†–ò–ö–ò –ö–û–î–ê

### –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

```
–°—Ç—Ä–æ–∫ –∫–æ–¥–∞: ~5000
–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ: 15%
–ü–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏: 0%
–¶–∏–∫–ª–∏—á–µ—Å–∫–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π: 3
Console.log: 250+
TODO –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤: 12
```

### –¶–µ–ª–µ–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

```
–°—Ç—Ä–æ–∫ –∫–æ–¥–∞: ~4000 (-20%)
–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ: <5%
–ü–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏: >70%
–¶–∏–∫–ª–∏—á–µ—Å–∫–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π: 0
–°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ: 100%
TODO –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤: 0
```

## üö® ANTI-PATTERNS –û–ë–ù–ê–†–£–ñ–ï–ù–´

1. **God Object:** outfitStore —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π (500+ —Å—Ç—Ä–æ–∫)
2. **Copy-Paste:** –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–≥–∏–∫–∏ –≤ —Ä–∞–∑–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö
3. **Magic Numbers:** –ß–∏—Å–ª–∞ –±–µ–∑ –∫–æ–Ω—Å—Ç–∞–Ω—Ç (300, 400, 0.985)
4. **Inconsistent Naming:** itemId vs item_id, outfit vs Outfit
5. **Mixed Concerns:** UI –ª–æ–≥–∏–∫–∞ –≤ store, –±–∏–∑–Ω–µ—Å –ª–æ–≥–∏–∫–∞ –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö

## ‚úÖ BEST PRACTICES –î–õ–Ø –í–ù–ï–î–†–ï–ù–ò–Ø

1. **Single Responsibility:** –ö–∞–∂–¥—ã–π –º–æ–¥—É–ª—å - –æ–¥–Ω–∞ –∑–∞–¥–∞—á–∞
2. **DRY (Don't Repeat Yourself):** –í—ã–Ω–µ—Å—Ç–∏ –æ–±—â—É—é –ª–æ–≥–∏–∫—É
3. **SOLID –ø—Ä–∏–Ω—Ü–∏–ø—ã:** –û—Å–æ–±–µ–Ω–Ω–æ Dependency Inversion
4. **Composition over Inheritance:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å hooks –∏ HOCs
5. **Error Boundaries:** –î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫ –Ω–∞ —É—Ä–æ–≤–Ω–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

## üìù –î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–Ø –ö –°–û–ó–î–ê–ù–ò–Æ

1. **API Documentation:** JSDoc –¥–ª—è –≤—Å–µ—Ö –ø—É–±–ª–∏—á–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π
2. **Component Storybook:** –í–∏–∑—É–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
3. **Architecture Decision Records:** –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –≤–∞–∂–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è
4. **User Flow Diagrams:** –î–∏–∞–≥—Ä–∞–º–º—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤
5. **Testing Guide:** –ì–∞–π–¥ –ø–æ –Ω–∞–ø–∏—Å–∞–Ω–∏—é –∏ –∑–∞–ø—É—Å–∫—É —Ç–µ—Å—Ç–æ–≤

## üé¨ QUICK WINS (–ú–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å —Å—Ä–∞–∑—É)

1. **–ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –≤ –æ–¥–∏–Ω —Ñ–∞–π–ª** - 30 –º–∏–Ω—É—Ç
2. **–£–¥–∞–ª–∏—Ç—å console.log** - 20 –º–∏–Ω—É—Ç
3. **–ò—Å–ø—Ä–∞–≤–∏—Ç—å –∏–º–ø–æ—Ä—Ç—ã** - 15 –º–∏–Ω—É—Ç
4. **–î–æ–±–∞–≤–∏—Ç—å JSDoc** - 1 —á–∞—Å
5. **–ë–∞–∑–æ–≤–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è** - 45 –º–∏–Ω—É—Ç

---

**–û–±—â–µ–µ –≤—Ä–µ–º—è –Ω–∞ –ø–æ–ª–Ω—ã–π —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥:** 8-10 –¥–Ω–µ–π  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –°—Ä–µ–¥–Ω–∏–π (–ø–æ—Å–ª–µ –±–∞–≥—Ñ–∏–∫—Å–æ–≤)  
**ROI:** –í—ã—Å–æ–∫–∏–π (—É–ø—Ä–æ—Å—Ç–∏—Ç –ø–æ–¥–¥–µ—Ä–∂–∫—É –∏ —Ä–∞–∑–≤–∏—Ç–∏–µ)
