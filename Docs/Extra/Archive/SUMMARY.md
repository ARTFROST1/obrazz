# ‚úÖ –ò–¢–û–ì–û–í–ê–Ø –°–í–û–î–ö–ê - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏ –≥–∞—Ä–¥–µ—Ä–æ–±–∞

**–î–∞—Ç–∞:** 17 –¥–µ–∫–∞–±—Ä—è 2025  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ü–û–õ–ù–û–°–¢–¨–Æ –ì–û–¢–û–í–û –ö –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Æ

---

## üéØ –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ

### 1. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω –∫–æ–¥ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è ‚úÖ

**–§–∞–π–ª:** `app/_layout.tsx`

**–ü—Ä–æ–±–ª–µ–º–∞:** `wardrobeStore` –∏ `outfitStore` –Ω–µ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–ª–∏—Å—å –∏–∑ AsyncStorage

**–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–ª–µ–Ω—ã –≤—ã–∑–æ–≤—ã `rehydrate()` –¥–ª—è –æ–±–æ–∏—Ö store –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

```typescript
useWardrobeStore.persist.rehydrate(); // ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ
useOutfitStore.persist.rehydrate(); // ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ
```

### 2. –î–æ–±–∞–≤–ª–µ–Ω–∞ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö ‚úÖ

**–§–∞–π–ª:** `scripts/wardrobeDiagnostics.ts`

**–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**

- üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Ç–∞–±–ª–∏—Ü—ã items
- üîç –ü–æ–¥—Å—á—ë—Ç —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –¥–µ—Ñ–æ–ª—Ç–Ω—ã—Ö –≤–µ—â–µ–π (–¥–æ–ª–∂–Ω–æ –±—ã—Ç—å 20)
- üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- üîç –ü–æ–¥—Å—á—ë—Ç –≤–µ—â–µ–π –≤ –≥–∞—Ä–¥–µ—Ä–æ–±–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ RLS –ø–æ–ª–∏—Ç–∏–∫ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- üîß **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:** –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–µ—Ñ–æ–ª—Ç–Ω—ã—Ö –≤–µ—â–µ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é

**–î–æ—Å—Ç—É–ø —á–µ—Ä–µ–∑ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞:**

```javascript
checkWardrobe(); // –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ
fixWardrobe(); // –ü—Ä–æ–≤–µ—Ä–∏—Ç—å + –∏—Å–ø—Ä–∞–≤–∏—Ç—å
```

### 3. –°–æ–∑–¥–∞–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è ‚úÖ

| –§–∞–π–ª                      | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ                              |
| ------------------------- | --------------------------------------- |
| `QUICKSTART.md`           | –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (30 —Å–µ–∫—É–Ω–¥)               |
| `TESTING_INSTRUCTIONS.md` | –ü–æ–ª–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é       |
| `WARDROBE_DIAGNOSTICS.md` | –î–µ—Ç–∞–ª—å–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∏ —Ä–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º |
| `WARDROBE_LOADING_FIX.md` | –¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è        |

---

## üöÄ –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å (–¥–ª—è –≤–∞—Å)

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
# 1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
npx expo start --clear

# 2. –ù–∞–∂–º–∏—Ç–µ 'j' –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è DevTools

# 3. –í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
checkWardrobe()

# 4. –ï—Å–ª–∏ –µ—Å—Ç—å –ø—Ä–æ–±–ª–µ–º—ã:
fixWardrobe()
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –û–±—ã—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# 1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
npx expo start --clear

# 2. –í–æ–π–¥–∏—Ç–µ –≤ –∞–∫–∫–∞—É–Ω—Ç

# 3. –û—Ç–∫—Ä–æ–π—Ç–µ –≤–∫–ª–∞–¥–∫—É "–ì–∞—Ä–¥–µ—Ä–æ–±"
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –í–µ—â–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ —Å–µ—Ç–∫–µ

---

## üìä –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

```
üîç Starting Wardrobe Database Diagnostics...

‚úÖ Items Table Accessibility      ‚Üí –ú–æ–∂–µ—Ç –ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —á–∏—Ç–∞—Ç—å items
‚úÖ System Default Items            ‚Üí –ï—Å—Ç—å –ª–∏ 20 –¥–µ—Ñ–æ–ª—Ç–Ω—ã—Ö –≤–µ—â–µ–π
‚úÖ User Authentication             ‚Üí –í–æ—à—ë–ª –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
‚ö†Ô∏è  User Wardrobe Items            ‚Üí –°–∫–æ–ª—å–∫–æ –≤–µ—â–µ–π —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
‚úÖ RLS Policy - Read Own Items     ‚Üí –†–∞–±–æ—Ç–∞—é—Ç –ª–∏ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞

üìã Summary: ‚ö†Ô∏è WARNINGS PRESENT
üí° Tip: User has no items. To auto-fix, call: fixWardrobe()
```

---

## üîß –ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª—è–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

### –°—Ü–µ–Ω–∞—Ä–∏–π: –£ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–µ—Ç –≤–µ—â–µ–π

**fixWardrobe() —Å–¥–µ–ª–∞–µ—Ç:**

1. –ü—Ä–æ–≤–µ—Ä–∏—Ç, –≤–æ—à—ë–ª –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚úì
2. –ü–æ—Å—á–∏—Ç–∞–µ—Ç —Ç–µ–∫—É—â–∏–µ –≤–µ—â–∏ (0) ‚úì
3. –ó–∞–≥—Ä—É–∑–∏—Ç 20 –¥–µ—Ñ–æ–ª—Ç–Ω—ã—Ö –≤–µ—â–µ–π –∏–∑ –ë–î ‚úì
4. –°–∫–æ–ø–∏—Ä—É–µ—Ç –∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —Å `user_id = <user_id>` ‚úì
5. –ü–æ–≤—Ç–æ—Ä–∏—Ç –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É ‚Üí –¢–µ–ø–µ—Ä—å –≤—Å–µ ‚úÖ

**–í—ã–≤–æ–¥ –≤ –∫–æ–Ω—Å–æ–ª—å:**

```
üîß Attempting to fix user wardrobe...

üë§ User: user@example.com
üì¶ Current items count: 0

üîÑ Copying default items to user...
üìã Found 20 default items to copy
‚úÖ Successfully copied 20 items to user wardrobe
```

---

## ‚ö†Ô∏è –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### –ü—Ä–æ–±–ª–µ–º–∞: "Cannot access items table"

**–ü—Ä–∏—á–∏–Ω–∞:** RLS –ø–æ–ª–∏—Ç–∏–∫–∏ –±–ª–æ–∫–∏—Ä—É—é—Ç –∏–ª–∏ —Ç–∞–±–ª–∏—Ü–∞ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç

**–†–µ—à–µ–Ω–∏–µ:**

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Supabase Dashboard ‚Üí Table Editor
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ç–∞–±–ª–∏—Ü–∞ `items` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ RLS –ø–æ–ª–∏—Ç–∏–∫–∏

### –ü—Ä–æ–±–ª–µ–º–∞: "No default items found"

**–ü—Ä–∏—á–∏–Ω–∞:** –í –ë–î –Ω–µ—Ç —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –¥–µ—Ñ–æ–ª—Ç–Ω—ã—Ö –≤–µ—â–µ–π (user_id IS NULL)

**–†–µ—à–µ–Ω–∏–µ:** –ù—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –¥–µ—Ñ–æ–ª—Ç–Ω—ã–µ –≤–µ—â–∏ –≤ –ë–î (—Å–º. –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é DEFAULT_ITEMS_SYSTEM.md)

### –ü—Ä–æ–±–ª–µ–º–∞: Supabase MCP –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç (401 Unauthorized)

**–≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ!** Supabase MCP —Ç—Ä–µ–±—É–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏.

**–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—É—é –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É —á–µ—Ä–µ–∑ `checkWardrobe()` - –æ–Ω–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ –∫–ª–∏–µ–Ω—Ç Supabase, –∫–æ—Ç–æ—Ä—ã–π —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏.

---

## ‚úÖ –ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞

–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:

- [ ] `checkWardrobe()` –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤—Å–µ ‚úÖ (–±–µ–∑ ‚ùå)
- [ ] –≠–∫—Ä–∞–Ω "–ì–∞—Ä–¥–µ—Ä–æ–±" –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤–µ—â–∏
- [ ] –ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤–æ–π –≤–µ—â–∏ –æ–Ω–∞ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –≤ —Å–ø–∏—Å–∫–µ
- [ ] –ü–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ –≤–µ—â–∏ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –±—ã—Å—Ç—Ä–æ
- [ ] –ú–æ–∂–Ω–æ —É–¥–∞–ª—è—Ç—å –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –≤–µ—â–∏

---

## üéâ –ì–æ—Ç–æ–≤–æ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é!

**–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –ø–æ—Ä—è–¥–æ–∫ –¥–µ–π—Å—Ç–≤–∏–π:**

1. ‚úÖ –ó–∞–ø—É—Å—Ç–∏—Ç–µ `npx expo start --clear`
2. ‚úÖ –û—Ç–∫—Ä–æ–π—Ç–µ DevTools (j)
3. ‚úÖ –í—ã–ø–æ–ª–Ω–∏—Ç–µ `checkWardrobe()` –≤ –∫–æ–Ω—Å–æ–ª–∏
4. ‚úÖ –ï—Å–ª–∏ WARNING ‚Üí –≤—ã–ø–æ–ª–Ω–∏—Ç–µ `fixWardrobe()`
5. ‚úÖ –û—Ç–∫—Ä–æ–π—Ç–µ —ç–∫—Ä–∞–Ω "–ì–∞—Ä–¥–µ—Ä–æ–±" ‚Üí –≤–µ—â–∏ –¥–æ–ª–∂–Ω—ã –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è

**–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:**

- –°–º. [WARDROBE_DIAGNOSTICS.md](WARDROBE_DIAGNOSTICS.md) - —Ä–∞–∑–¥–µ–ª "–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã"

---

**–í—Å–µ –≥–æ—Ç–æ–≤–æ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è! üöÄ**
