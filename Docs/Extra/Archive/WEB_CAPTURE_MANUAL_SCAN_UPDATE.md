# Web Capture - Manual Scan Update

> **–î–∞—Ç–∞:** 13 –¥–µ–∫–∞–±—Ä—è 2025
> **–í–µ—Ä—Å–∏—è:** 1.2
> **–°—Ç–∞—Ç—É—Å:** –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

---

## üéØ –¶–µ–ª—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

–ò–∑–º–µ–Ω–∏—Ç—å –ª–æ–≥–∏–∫—É —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —Å **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ** –Ω–∞ **—Ä—É—á–Ω–æ–µ** –ø–æ –Ω–∞–∂–∞—Ç–∏—é –∫–Ω–æ–ø–∫–∏. –£–ª—É—á—à–∏—Ç—å UX –∏ —Å–Ω–∏–∑–∏—Ç—å –Ω–∞–≥—Ä—É–∑–∫—É –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ.

---

## üìã –ù–æ–≤–∞—è –ª–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã

### –°–æ—Å—Ç–æ—è–Ω–∏—è –∫–Ω–æ–ø–∫–∏:

1. **–°–∫–∞–Ω–∏—Ä–æ–≤–∞—Ç—å** (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
   - –ß—ë—Ä–Ω–∞—è –∫–Ω–æ–ø–∫–∞ —Å –±–µ–ª—ã–º —Ç–µ–∫—Å—Ç–æ–º
   - –¢–µ–∫—Å—Ç: "üîç –°–∫–∞–Ω–∏—Ä–æ–≤–∞—Ç—å"
   - –î–µ–π—Å—Ç–≤–∏–µ: –∑–∞–ø—É—Å–∫–∞–µ—Ç —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã

2. **–°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ...** (–ø—Ä–æ—Ü–µ—Å—Å)
   - –¢—ë–º–Ω–æ-—Å–µ—Ä–∞—è –∫–Ω–æ–ø–∫–∞
   - –¢–µ–∫—Å—Ç: "–°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ..."
   - –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ª–æ–∞–¥–µ—Ä (ActivityIndicator)
   - –ö–Ω–æ–ø–∫–∞ disabled

3. **–í—ã—Ä–µ–∑–∞—Ç—å –≤—Ä—É—á–Ω—É—é** (–µ—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ)
   - –ó–µ–ª—ë–Ω–∞—è –∫–Ω–æ–ø–∫–∞
   - –¢–µ–∫—Å—Ç: "‚úÇÔ∏è –í—ã—Ä–µ–∑–∞—Ç—å –≤—Ä—É—á–Ω—É—é"
   - –î–µ–π—Å—Ç–≤–∏–µ: –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç overlay –¥–ª—è —Ä—É—á–Ω–æ–≥–æ –≤—ã—Ä–µ–∑–∞–Ω–∏—è

4. **–°–∫—Ä—ã—Ç–∞** (–µ—Å–ª–∏ –Ω–∞–π–¥–µ–Ω—ã –≤–µ—â–∏)
   - –ö–Ω–æ–ø–∫–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–∫—Ä—ã–≤–∞–µ—Ç—Å—è
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è bottom sheet —Å –≥–∞–ª–µ—Ä–µ–µ–π –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö –≤–µ—â–µ–π

---

## üîÑ –ê–ª–≥–æ—Ä–∏—Ç–º —Ä–∞–±–æ—Ç—ã

```
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –º–∞–≥–∞–∑–∏–Ω ‚Üí –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –∫–Ω–æ–ø–∫–∞ "–°–∫–∞–Ω–∏—Ä–æ–≤–∞—Ç—å"
   ‚Üì
2. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç "–°–∫–∞–Ω–∏—Ä–æ–≤–∞—Ç—å" ‚Üí –ö–Ω–æ–ø–∫–∞ –º–µ–Ω—è–µ—Ç—Å—è –Ω–∞ "–°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ..."
   ‚Üì
3. –°–∫—Ä–∏–ø—Ç —Å–∫–∞–Ω–∏—Ä—É–µ—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—É (2 —Ä–∞–∑–∞: —Å—Ä–∞–∑—É –∏ —á–µ—Ä–µ–∑ 2 —Å–µ–∫—É–Ω–¥—ã)
   ‚Üì
4a. –ù–∞–π–¥–µ–Ω—ã –≤–µ—â–∏ (> 0) ‚Üí –ö–Ω–æ–ø–∫–∞ —Å–∫—Ä—ã–≤–∞–µ—Ç—Å—è + –û—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è gallery sheet
4b. –ù–µ –Ω–∞–π–¥–µ–Ω–æ (= 0) ‚Üí –ö–Ω–æ–ø–∫–∞ –º–µ–Ω—è–µ—Ç—Å—è –Ω–∞ "–í—ã—Ä–µ–∑–∞—Ç—å –≤—Ä—É—á–Ω—É—é"
   ‚Üì
5. –ü—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ –Ω–∞ –Ω–æ–≤—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É ‚Üí –°–±—Ä–æ—Å —Å–æ—Å—Ç–æ—è–Ω–∏—è ‚Üí –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è "–°–∫–∞–Ω–∏—Ä–æ–≤–∞—Ç—å"
```

---

## üõ† –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### 1. imageDetection.ts

**–£–¥–∞–ª–µ–Ω–æ:**

- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- –°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏ —Å–∫—Ä–æ–ª–ª–µ
- MutationObserver –¥–ª—è lazy-loaded –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

**–û—Å—Ç–∞–ª–æ—Å—å:**

- –¢–æ–ª—å–∫–æ —Ä—É—á–Ω–æ–π —Ç—Ä–∏–≥–≥–µ—Ä —á–µ—Ä–µ–∑ `document.addEventListener('detectImages')`
- –î–≤–æ–π–Ω–æ–µ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ (—Å—Ä–∞–∑—É –∏ —á–µ—Ä–µ–∑ 2 —Å–µ–∫—É–Ω–¥—ã) –ø–æ—Å–ª–µ —Ç—Ä–∏–≥–≥–µ—Ä–∞

```javascript
// Listen for manual trigger from React Native
document.addEventListener('detectImages', function () {
  console.log('[ImageDetection] Manual trigger received, starting detection');
  // Run detection immediately
  detectImages();

  // Also run delayed detection to catch images that are still loading
  setTimeout(() => {
    console.log('[ImageDetection] Running delayed detection for late-loaded images');
    detectImages();
  }, 2000);
});
```

### 2. shoppingBrowserStore.ts

**–î–æ–±–∞–≤–ª–µ–Ω–æ:**

```typescript
interface ShoppingBrowserState {
  // Scan state
  isScanning: boolean;
  hasScanned: boolean;

  // Scan actions
  setScanning: (scanning: boolean) => void;
  setHasScanned: (scanned: boolean) => void;
  resetScanState: () => void;
}
```

**–§—É–Ω–∫—Ü–∏–∏:**

- `setScanning(true)` - –≤–∫–ª—é—á–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
- `setHasScanned(true)` - –ø–æ–º–µ—Ç–∏—Ç—å, —á—Ç–æ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ
- `resetScanState()` - —Å–±—Ä–æ—Å–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ (–ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ –Ω–∞ –Ω–æ–≤—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É)

### 3. DetectionFAB.tsx

**–û–±–Ω–æ–≤–ª—ë–Ω –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å:**

```typescript
interface DetectionFABProps {
  onScan: () => void; // Callback –¥–ª—è —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
  onManualCrop: () => void; // Callback –¥–ª—è —Ä—É—á–Ω–æ–≥–æ –≤—ã—Ä–µ–∑–∞–Ω–∏—è
}
```

**–õ–æ–≥–∏–∫–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è:**

```typescript
// Default state
let buttonText = 'üîç –°–∫–∞–Ω–∏—Ä–æ–≤–∞—Ç—å';
let buttonStyle = styles.buttonScan;
let onPress = onScan;
let showLoader = false;

if (isScanning) {
  buttonText = '–°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ...';
  buttonStyle = styles.buttonScanning;
  onPress = () => {}; // Disabled
  showLoader = true;
} else if (hasScanned && detectedImages.length === 0) {
  buttonText = '‚úÇÔ∏è –í—ã—Ä–µ–∑–∞—Ç—å –≤—Ä—É—á–Ω—É—é';
  buttonStyle = styles.buttonManual;
  onPress = onManualCrop;
}

// Hide button if items detected
if (hasScanned && detectedImages.length > 0 && !isScanning) {
  return null;
}
```

**–°—Ç–∏–ª–∏ –∫–Ω–æ–ø–æ–∫:**

```typescript
buttonScan: {
  backgroundColor: '#000000', // Black for scan button
}
buttonScanning: {
  backgroundColor: '#333333', // Dark gray during scanning
}
buttonManual: {
  backgroundColor: '#34C759', // Green for manual crop
}
```

### 4. browser.tsx

**–î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è handleScan:**

```typescript
const handleScan = () => {
  console.log('[Browser] Manual scan triggered');
  setScanning(true);

  // Trigger detection after delay to allow images to load
  if (webViewRef.current) {
    detectionTimeoutRef.current = setTimeout(() => {
      if (webViewRef.current) {
        console.log('[Browser] Executing detection in WebView');
        webViewRef.current.injectJavaScript(`
          (function() {
            try {
              console.log('[Browser->WebView] Manual detection trigger');
              const event = new Event('detectImages');
              document.dispatchEvent(event);
            } catch (e) {
              console.error('[Manual Detection] Error:', e);
            }
          })();
          true;
        `);
      }
    }, 500); // Short delay to show scanning state
  }
};
```

**–û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤:**

```typescript
const handleMessage = (event: WebViewMessageEvent) => {
  // ...
  if (data.type === 'IMAGES_DETECTED') {
    const images: DetectedImage[] = data.images || [];

    // Stop scanning state
    setScanning(false);
    setHasScanned(true);

    if (images.length > 0) {
      setDetectedImages(images);

      // Auto-open gallery sheet
      setTimeout(() => {
        showGallery(true);
      }, 300);
    } else {
      console.log('[WebView Message] No images detected');
    }
  }
};
```

**–°–±—Ä–æ—Å —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏:**

```typescript
const handleNavigationStateChange = (navState: WebViewNavigation) => {
  // Reset scan state when navigating to new page
  if (navState.url !== lastUrlRef.current) {
    console.log('[Browser] URL changed, resetting scan state');
    resetScanState();
    lastUrlRef.current = navState.url;
  }
  // ...
};

const handleLoadEnd = () => {
  setLoading(false);
  // ...
  // Reset scan state on new page load
  resetScanState();
};
```

---

## ‚úÖ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

### –î–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:

- ‚ùå –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏ –∫–∞–∂–¥–æ–π –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- ‚ùå –°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏ —Å–∫—Ä–æ–ª–ª–µ
- ‚ùå –í—ã—Å–æ–∫–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ
- ‚ùå –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å
- ‚ùå –õ–∏—à–Ω–∏–µ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ö –±–µ–∑ –æ–¥–µ–∂–¥—ã

### –ü–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:

- ‚úÖ –°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–æ–ª—å–∫–æ –ø–æ –Ω–∞–∂–∞—Ç–∏—é –∫–Ω–æ–ø–∫–∏
- ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å
- ‚úÖ –°–Ω–∏–∂–µ–Ω–∞ –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ
- ‚úÖ –Ø—Å–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å (loading state)
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ—Ç–∫—Ä—ã—Ç–∏–µ –≥–∞–ª–µ—Ä–µ–∏ –ø—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏
- ‚úÖ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Ä—É—á–Ω–æ–≥–æ –≤—ã—Ä–µ–∑–∞–Ω–∏—è, –µ—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ
- ‚úÖ –°–±—Ä–æ—Å —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ –Ω–∞ –Ω–æ–≤—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É

---

## üé® UX Flow

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  WebView (–º–∞–≥–∞–∑–∏–Ω –∑–∞–≥—Ä—É–∂–µ–Ω)         ‚îÇ
‚îÇ                                     ‚îÇ
‚îÇ  [üîç –°–∫–∞–Ω–∏—Ä–æ–≤–∞—Ç—å]  ‚Üê –ß—ë—Ä–Ω–∞—è –∫–Ω–æ–ø–∫–∞ ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                ‚Üì (tap)
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  WebView (—Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ)             ‚îÇ
‚îÇ                                     ‚îÇ
‚îÇ  [‚è≥ –°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ...]  ‚Üê –õ–æ–∞–¥–µ—Ä     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                ‚Üì
      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
      ‚îÇ                   ‚îÇ
      ‚Üì                   ‚Üì
–ù–∞–π–¥–µ–Ω–æ > 0          –ù–∞–π–¥–µ–Ω–æ = 0
      ‚îÇ                   ‚îÇ
      ‚Üì                   ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê       ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ –ö–Ω–æ–ø–∫–∞    ‚îÇ       ‚îÇ [‚úÇÔ∏è –í—ã—Ä–µ–∑–∞—Ç—å ‚îÇ
‚îÇ —Å–∫—Ä—ã—Ç–∞    ‚îÇ       ‚îÇ   –≤—Ä—É—á–Ω—É—é]   ‚îÇ
‚îÇ           ‚îÇ       ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
‚îÇ ‚Üì         ‚îÇ              ‚Üì
‚îÇ Gallery   ‚îÇ         Crop Overlay
‚îÇ Sheet     ‚îÇ
‚îÇ –æ—Ç–∫—Ä—ã—Ç    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üß™ –¢–µ—Å—Ç–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –£—Å–ø–µ—à–Ω–æ–µ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ

1. –û—Ç–∫—Ä—ã—Ç—å –º–∞–≥–∞–∑–∏–Ω (ZARA)
2. –ù–∞–∂–∞—Ç—å "üîç –°–∫–∞–Ω–∏—Ä–æ–≤–∞—Ç—å"
3. **–û–∂–∏–¥–∞–µ—Ç—Å—è:** –ö–Ω–æ–ø–∫–∞ –º–µ–Ω—è–µ—Ç—Å—è –Ω–∞ "–°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ..." —Å –ª–æ–∞–¥–µ—Ä–æ–º
4. **–û–∂–∏–¥–∞–µ—Ç—Å—è:** –ß–µ—Ä–µ–∑ ~2-3 —Å–µ–∫—É–Ω–¥—ã –∫–Ω–æ–ø–∫–∞ —Å–∫—Ä—ã–≤–∞–µ—Ç—Å—è
5. **–û–∂–∏–¥–∞–µ—Ç—Å—è:** –û—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è bottom sheet —Å –≥–∞–ª–µ—Ä–µ–µ–π –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö –≤–µ—â–µ–π

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ

1. –û—Ç–∫—Ä—ã—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É –±–µ–∑ –æ–¥–µ–∂–¥—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≥–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –±–ª–æ–≥–∞)
2. –ù–∞–∂–∞—Ç—å "üîç –°–∫–∞–Ω–∏—Ä–æ–≤–∞—Ç—å"
3. **–û–∂–∏–¥–∞–µ—Ç—Å—è:** –ö–Ω–æ–ø–∫–∞ –º–µ–Ω—è–µ—Ç—Å—è –Ω–∞ "–°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ..."
4. **–û–∂–∏–¥–∞–µ—Ç—Å—è:** –ß–µ—Ä–µ–∑ ~2-3 —Å–µ–∫—É–Ω–¥—ã –∫–Ω–æ–ø–∫–∞ –º–µ–Ω—è–µ—Ç—Å—è –Ω–∞ "‚úÇÔ∏è –í—ã—Ä–µ–∑–∞—Ç—å –≤—Ä—É—á–Ω—É—é"
5. –ù–∞–∂–∞—Ç—å "‚úÇÔ∏è –í—ã—Ä–µ–∑–∞—Ç—å –≤—Ä—É—á–Ω—É—é"
6. **–û–∂–∏–¥–∞–µ—Ç—Å—è:** –û—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è crop overlay

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ –Ω–æ–≤—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É

1. –û—Ç–∫—Ä—ã—Ç—å –º–∞–≥–∞–∑–∏–Ω, –Ω–∞–∂–∞—Ç—å "–°–∫–∞–Ω–∏—Ä–æ–≤–∞—Ç—å"
2. –î–æ–∂–¥–∞—Ç—å—Å—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ (–ª—é–±–æ–≥–æ)
3. –ü–µ—Ä–µ–π—Ç–∏ –ø–æ —Å—Å—ã–ª–∫–µ –Ω–∞ –¥—Ä—É–≥—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
4. **–û–∂–∏–¥–∞–µ—Ç—Å—è:** –ö–Ω–æ–ø–∫–∞ —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–µ "üîç –°–∫–∞–Ω–∏—Ä–æ–≤–∞—Ç—å"

### –°—Ü–µ–Ω–∞—Ä–∏–π 4: –°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–æ –≤—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏

1. –ù–µ –¥–æ–∂–∏–¥–∞—è—Å—å –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã, –Ω–∞–∂–∞—Ç—å "–°–∫–∞–Ω–∏—Ä–æ–≤–∞—Ç—å"
2. **–û–∂–∏–¥–∞–µ—Ç—Å—è:** –°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è
3. **–û–∂–∏–¥–∞–µ—Ç—Å—è:** –ë—É–¥—É—Ç –Ω–∞–π–¥–µ–Ω—ã —Ö–æ—Ç—è –±—ã –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è

---

## üìä –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### –î–æ:

- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è: ~5-10 —Ä–∞–∑ –∑–∞ —Å–µ—Å—Å–∏—é
- –°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–∏ —Å–∫—Ä–æ–ª–ª–µ: ~20-50 —Ä–∞–∑ –∑–∞ —Å–µ—Å—Å–∏—é
- –û–±—â–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞: –í—ã—Å–æ–∫–∞—è

### –ü–æ—Å–ª–µ:

- –†—É—á–Ω—ã–µ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è: ~1-3 —Ä–∞–∑–∞ –∑–∞ —Å–µ—Å—Å–∏—é
- –°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–∏ —Å–∫—Ä–æ–ª–ª–µ: 0
- –û–±—â–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞: –ù–∏–∑–∫–∞—è (—ç–∫–æ–Ω–æ–º–∏—è ~80-90%)

---

## üîß –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

1. **Visual feedback:**
   - Loader –≤ –∫–Ω–æ–ø–∫–µ –≤–æ –≤—Ä–µ–º—è —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
   - –ü–ª–∞–≤–Ω—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—ã –º–µ–∂–¥—É —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏

2. **Smart reset:**
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–±—Ä–æ—Å –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ –Ω–∞ –Ω–æ–≤—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–±—Ä–æ—Å –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –Ω–æ–≤–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã

3. **Error handling:**
   - –ï—Å–ª–∏ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–≤–∏—Å–ª–æ (> 10 —Å–µ–∫—É–Ω–¥), –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–±—Ä–æ—Å –≤ "–í—ã—Ä–µ–∑–∞—Ç—å –≤—Ä—É—á–Ω—É—é"

---

## üìù –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ. –°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ–ø–µ—Ä—å –ø–æ–ª–Ω–æ—Å—Ç—å—é –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—Ç—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º, —á—Ç–æ:

- –£–ª—É—á—à–∞–µ—Ç UX (–ø–æ–Ω—è—Ç–Ω–æ, —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç)
- –°–Ω–∏–∂–∞–µ—Ç –Ω–∞–≥—Ä—É–∑–∫—É –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ
- –≠–∫–æ–Ω–æ–º–∏—Ç –±–∞—Ç–∞—Ä–µ—é
- –î–∞—ë—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –∫–æ–Ω—Ç—Ä–æ–ª—å

**–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:**

1. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –º–∞–≥–∞–∑–∏–Ω–∞—Ö
2. –°–±–æ—Ä feedback –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
3. –í–æ–∑–º–æ–∂–Ω–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ "–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ" –≤ –±—É–¥—É—â–µ–º
