# Documentation Revision Report

**Date:** January 30, 2026 (14:30)  
**Revision Type:** Consistency & Accuracy Review  
**Scope:** Authentication, IAP/Subscriptions, Wardrobe/Outfit services, Rails backend

---

## üìã Files Updated

### 1. TechStack.md

- **Version:** 1.3.0 ‚Üí 1.4.0
- **Date:** January 27 ‚Üí January 30, 2026

**Changes:**

- Fixed package versions to match `package.json`:
  - `react-native-reanimated`: ~4.1.1 ‚Üí **~4.2.1**
  - `react-native-worklets`: 0.5.1 ‚Üí **0.7.2**
  - `react-native-gesture-handler`: ~2.28.0 ‚Üí **~2.30.0**
  - `eslint-config-expo`: ~10.0.0 ‚Üí **~55.0.0**
- **Added** new section: "üí≥ –ü–ª–∞—Ç–µ–∂–∏ –∏ –ø–æ–¥–ø–∏—Å–∫–∏" with:
  - `react-native-iap: ^14.7.7` (already installed)
  - Subscription plans table (free, pro_monthly, pro_yearly, max_monthly, max_yearly)
  - Token packs documentation
- **Added** new section: "üîê OAuth Authentication" with:
  - `expo-apple-authentication`, `expo-auth-session`, `expo-web-browser`
  - Google OAuth + Apple Sign In documentation
  - Reference to `services/auth/oauthService.ts`

### 2. CURRENT_STATUS.md

- **Date:** January 27 ‚Üí January 30, 2026

**Changes:**

- Updated auth description to include Google/Apple OAuth
- Fixed: "Auth: Supabase email auth + session persistence" ‚Üí "Auth: Supabase email auth + **Google/Apple OAuth** + session persistence"

### 3. PRDobrazz.md

- **Version:** 2.1 ‚Üí 2.2
- **Date:** January 26 ‚Üí January 30, 2026

**Changes:**

- Fixed stage reference: "Stage 4.12" ‚Üí "Stage 4.13"

### 4. Implementation.md

- **Date:** January 27 ‚Üí January 30, 2026

**Changes:**

- Updated current stage: "Stage 4.13 Complete ‚úÖ (Navigation Refactor + Offline-First)" ‚Üí "Stage 4.13 Complete ‚úÖ (Navigation Refactor + Offline-First + OAuth)"
- Added to Stage 2 (Authentication):
  - OAuth integration ‚Äî Google OAuth + Apple Sign In
  - Reference to `services/auth/oauthService.ts`
  - expo-apple-authentication + expo-auth-session
- Added to Stage 3 (Wardrobe Management):
  - Apple Vision background removal for iOS 16+
  - `modules/subject-lifter/` native Expo module
  - Automatic fallback to Pixian for Android/older iOS

### 5. project_structure.md

- **Date:** January 26 ‚Üí January 30, 2026
- **Stage:** 4.12 ‚Üí 4.13

**Changes:**

- Fixed stage reference: "Stage 4.12 Complete" ‚Üí "Stage 4.13 Complete"
- Updated auth service description: "authService.ts" ‚Üí "authService.ts + oauthService.ts"
- Updated backgroundRemover description: "Pixian.ai integration" ‚Üí "Pixian.ai + Apple Vision (subject-lifter)"

### 6. AppMapobrazz.md

- **Date:** December 20, 2025 ‚Üí January 30, 2026
- **Stage:** 4.12 ‚Üí 4.13

**Changes:**

- Updated stage and status
- Added OAuth to project status
- Fixed next stage: "AI-–∞–Ω–∞–ª–∏–∑ –≤–µ—â–µ–π –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ" ‚Üí "AI-—Ñ—É–Ω–∫—Ü–∏–∏ (The New Black API)"

### 7. ROADMAP_NEXT_STEPS.md

- **Date:** January 27 ‚Üí January 30, 2026

**Changes:**

- Updated status to include OAuth
- Changed "–°–ª–µ–¥—É—é—â–∏–π —ç—Ç–∞–ø: Stage 5 (AI)" ‚Üí "–°–ª–µ–¥—É—é—â–∏–π —ç—Ç–∞–ø: Stage 5 (AI + Rails Backend)"
- Expanded "–ß—Ç–æ —É–∂–µ —Å–¥–µ–ª–∞–Ω–æ" section:
  - Added Google OAuth + Apple Sign In to Stage 2
  - Added Apple Vision background removal to Stage 3
  - Added Stage 4.13 Navigation Refactor summary
- Updated priority table: Navigation Refactor status "üöß –°–ª–µ–¥—É—é—â–∏–π —ç—Ç–∞–ø" ‚Üí "‚úÖ –ó–∞–≤–µ—Ä—à—ë–Ω"

---

## üîç Inconsistencies Fixed

| Issue                       | Location             | Before                  | After                      |
| --------------------------- | -------------------- | ----------------------- | -------------------------- |
| Outdated package versions   | TechStack.md         | reanimated ~4.1.1       | ~4.2.1                     |
| Missing IAP documentation   | TechStack.md         | "üìã –ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è"        | ‚úÖ Documented              |
| Missing OAuth documentation | TechStack.md         | Not mentioned           | ‚úÖ New section added       |
| Wrong stage number          | PRDobrazz.md         | Stage 4.12              | Stage 4.13                 |
| Outdated date               | Multiple files       | Jan 26-27               | Jan 30                     |
| Missing subject-lifter      | project_structure.md | "Pixian.ai integration" | "Pixian.ai + Apple Vision" |
| Incomplete auth description | CURRENT_STATUS.md    | Email only              | Email + OAuth              |

---

## ‚úÖ Verified Consistency

### Code ‚Üî Documentation Match

| Feature              | Code Location                                  | Documentation                     | Status    |
| -------------------- | ---------------------------------------------- | --------------------------------- | --------- |
| OAuth Service        | `services/auth/oauthService.ts`                | TechStack, Implementation         | ‚úÖ Synced |
| IAP Service          | `services/iap/iapService.ts`                   | TechStack                         | ‚úÖ Synced |
| Subscription Service | `services/subscription/subscriptionService.ts` | TechStack, PRD                    | ‚úÖ Synced |
| Subject Lifter       | `modules/subject-lifter/`                      | Implementation, project_structure | ‚úÖ Synced |
| Background Remover   | `services/wardrobe/backgroundRemover.ts`       | Implementation                    | ‚úÖ Synced |
| Auth Store           | `store/auth/authStore.ts`                      | TechStack                         | ‚úÖ Synced |
| Subscription Store   | `store/subscription/subscriptionStore.ts`      | TechStack                         | ‚úÖ Synced |

### Rails Backend ‚Üî Documentation Match

| Feature            | Rails Code                    | Documentation      | Status    |
| ------------------ | ----------------------------- | ------------------ | --------- |
| Subscription Plans | `app/models/subscription.rb`  | TechStack, PRD     | ‚úÖ Synced |
| Token Balance      | `app/models/token_balance.rb` | RAILS_BACKEND_IMPL | ‚úÖ Synced |
| API Routes         | `config/routes.rb`            | RAILS_BACKEND_IMPL | ‚úÖ Synced |
| Webhooks           | `api/v1/webhooks/*`           | RAILS_BACKEND_IMPL | ‚úÖ Synced |

---

## üìù Notes

1. **Subscription Plans** in Rails use 5 tiers: `free`, `pro_monthly`, `pro_yearly`, `max_monthly`, `max_yearly`
2. **Token costs** are standardized at 1 token per AI generation (virtual_try_on, fashion_model, variation)
3. **OAuth** fully implemented with native Apple Sign In on iOS and Supabase OAuth fallback
4. **Apple Vision** background removal available on iOS 16+ devices, with automatic Pixian.ai fallback

---

## üöÄ Next Actions

No immediate documentation updates required. All major inconsistencies have been resolved.

**Recommended for future:**

- Update AppMapobrazz.md detailed screen descriptions when Stage 5 AI features are implemented
- Add Rails backend API documentation when endpoints are finalized
- Update UI_UX_doc.md if navigation changes are made
